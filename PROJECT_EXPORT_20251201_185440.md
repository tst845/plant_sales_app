# Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: plant_protection_app
**Ð”Ð°Ñ‚Ð°:** 2025-12-01 18:54:40
**ÐŸÑƒÑ‚ÑŒ:** C:\Users\ÐÐµÐ»Ð»Ð¸\Desktop\file_for_run_python\plant_protection_app

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
  PROJECT_EXPORT_20251201_185440.md
  export_project_v1.py
  main.py
  main_db_test.py
  pyproject.toml
  app/
    README.txt
    __init__.py
    assets/
      disease_classes.txt
      database/
      fonts/
      models/
        plant_disease_model.tflite
    core/
      __init__.py
      config.py
      database.py
      database_backup.py
      test_data.py
    ml/
      __init__.py
      image_processor.py
      model_loader.py
    ui/
      __init__.py
      screens/
        __init__.py
        camera_screen.py
        catalog_screen.py
        disease_detection_screen.py
        main_screen.py
        orders_screen.py
        results_screen.py
        settings_screen.py
      widgets/
        __init__.py
        custom_buttons.py
        image_widgets.py
  resources/
  tests/
    __init__.py
    test_basic.py
```

## Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²

### ðŸ“„ PROJECT_EXPORT_20251201_185440.md
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```markdown

```

### ðŸ“„ export_project_v1.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 10701 Ð±Ð°Ð¹Ñ‚  
```python
import os
import pathlib
from datetime import datetime

def export_project(root_path=".", output_file="project_export.md"):
    """
    Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¸ ÐºÐ¾Ð´ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð² Ð¾Ð´Ð¸Ð½ Markdown Ñ„Ð°Ð¹Ð».
    """
    
    # Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð´Ð»Ñ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
    exclude_dirs = {
        '.git', '__pycache__', '.pytest_cache', '.mypy_cache',
        'venv', '.venv', 'env', '.env', 'envs',
        '.vscode', '.idea', 'vs_code',
        'dist', 'build', '*.egg-info',
        'node_modules', 'coverage', '.coverage',
        '.github', '.gitlab', '.bitbucket',
        'poetry_env', 'virtual_env'  # Ð´Ð¾Ð±Ð°Ð²Ð¸Ð» ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð»Ñ poetry
    }
    
    # Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
    exclude_files = {
        '*.pyc', '*.pyo', '*.pyd', '*.so',
        '*.db', '*.sqlite', '*.sqlite3', '*.log',
        'poetry.lock', 'package-lock.json', 'yarn.lock',
        '.gitignore', '.env', '.env.local', '.env.*',
        'Thumbs.db', 'desktop.ini'
    }
    
    root_path = pathlib.Path(root_path).resolve()
    
    with open(output_file, 'w', encoding='utf-8') as out:
        # Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
        out.write(f"# Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: {root_path.name}\n")
        out.write(f"**Ð”Ð°Ñ‚Ð°:** {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
        out.write(f"**ÐŸÑƒÑ‚ÑŒ:** {root_path}\n\n")
        
        # Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
        out.write("## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n\n")
        out.write("```\n")
        
        # Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ
        structure_lines = []
        
        for root, dirs, files in os.walk(root_path):
            # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
            dirs[:] = [
                d for d in dirs 
                if d not in exclude_dirs 
                and not d.startswith('.')
                and not d.endswith('__pycache__')
            ]
            
            # ÐžÑ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ
            try:
                rel_root = pathlib.Path(root).relative_to(root_path)
            except ValueError:
                continue
            
            # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð¾Ñ‚ÑÑ‚ÑƒÐ¿
            if str(rel_root) == '.':
                indent_level = 0
            else:
                indent_level = len(rel_root.parts)
            
            indent = "  " * indent_level
            
            if str(rel_root) != '.':
                structure_lines.append(f"{indent}{rel_root.name}/")
            
            # Ð¤Ð°Ð¹Ð»Ñ‹
            for file in sorted(files):
                if any(file.endswith(ext.strip('*')) for ext in exclude_files if '*' in ext):
                    continue
                if file in exclude_files:
                    continue
                if any(file == pattern for pattern in exclude_files):
                    continue
                    
                structure_lines.append(f"{indent}  {file}")
        
        # Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ
        for line in structure_lines:
            out.write(f"{line}\n")
        
        out.write("```\n\n")
        
        # Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²
        out.write("## Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²\n\n")
        
        file_count = 0
        total_size = 0
        excluded_count = 0
        
        for root, dirs, files in os.walk(root_path):
            # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
            dirs[:] = [
                d for d in dirs 
                if d not in exclude_dirs 
                and not d.startswith('.')
                and not d.endswith('__pycache__')
            ]
            
            for file in sorted(files):
                file_path = pathlib.Path(root) / file
                
                # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²
                skip = False
                
                # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸ÑŽ (ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹ Ñ‚Ð¸Ð¿Ð° *.pyc)
                for pattern in exclude_files:
                    if pattern.startswith('*'):
                        ext = pattern[1:]  # ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ Ð·Ð²ÐµÐ·Ð´Ð¾Ñ‡ÐºÑƒ
                        if file.endswith(ext):
                            excluded_count += 1
                            skip = True
                            break
                    elif file == pattern:
                        excluded_count += 1
                        skip = True
                        break
                
                if skip:
                    continue
                
                # Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
                if file.startswith('.'):
                    excluded_count += 1
                    continue
                
                try:
                    rel_path = file_path.relative_to(root_path)
                except ValueError:
                    continue
                
                # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ ÑÐ·Ñ‹Ðº Ð´Ð»Ñ Ð¿Ð¾Ð´ÑÐ²ÐµÑ‚ÐºÐ¸ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ°
                ext = file_path.suffix.lower()
                lang_map = {
                    '.py': 'python',
                    '.js': 'javascript',
                    '.ts': 'typescript',
                    '.html': 'html',
                    '.css': 'css',
                    '.md': 'markdown',
                    '.json': 'json',
                    '.yml': 'yaml',
                    '.yaml': 'yaml',
                    '.txt': 'text',
                    '.toml': 'toml',
                    '.ini': 'ini',
                    '.xml': 'xml',
                    '.csv': 'csv',
                    '.sql': 'sql',
                }
                lang = lang_map.get(ext, '')
                
                out.write(f"### ðŸ“„ {rel_path}\n")
                out.write(f"**Ð Ð°Ð·Ð¼ÐµÑ€:** {file_path.stat().st_size} Ð±Ð°Ð¹Ñ‚  \n")
                
                try:
                    # Ð§Ð¸Ñ‚Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¾Ð¹ Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²Ð¾Ðº
                    try:
                        content = file_path.read_text(encoding='utf-8')
                    except UnicodeDecodeError:
                        try:
                            content = file_path.read_text(encoding='cp1251')
                        except:
                            content = f"# ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» (Ð±Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ð¹ Ð¸Ð»Ð¸ Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²ÐºÐ°)\n"
                    
                    # ÐžÐ±Ñ€ÐµÐ·Ð°ÐµÐ¼ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
                    max_lines = 1000
                    lines = content.split('\n')
                    if len(lines) > max_lines:
                        content = '\n'.join(lines[:max_lines])
                        content += f"\n\n# ... Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€ÐµÐ·Ð°Ð½, Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð¾ {max_lines} Ð¸Ð· {len(lines)} ÑÑ‚Ñ€Ð¾Ðº ..."
                    
                    out.write(f"```{lang}\n")
                    out.write(content)
                    if not content.endswith('\n'):
                        out.write('\n')
                    out.write("```\n\n")
                    
                    file_count += 1
                    total_size += file_path.stat().st_size
                    
                except Exception as e:
                    out.write(f"```\n# ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ñ‡Ñ‚ÐµÐ½Ð¸Ð¸ Ñ„Ð°Ð¹Ð»Ð°: {e}\n```\n\n")
        
        # Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
        out.write("## Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°\n\n")
        out.write(f"- **Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð²:** {file_count}\n")
        out.write(f"- **Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð²:** {excluded_count}\n")
        out.write(f"- **ÐžÐ±Ñ‰Ð¸Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€:** {total_size} Ð±Ð°Ð¹Ñ‚ ({total_size/1024:.2f} KB)\n")
        out.write(f"- **Ð”Ð°Ñ‚Ð° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð°:** {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")

if __name__ == "__main__":
    print("ðŸ” ÐŸÐ¾Ð¸ÑÐº ÐºÐ¾Ñ€Ð½Ñ Poetry Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°...")
    current_dir = pathlib.Path.cwd()
    
    # Ð˜Ñ‰ÐµÐ¼ pyproject.toml Ð² Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¸Ð»Ð¸ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
    project_root = None
    
    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
    if (current_dir / "pyproject.toml").exists():
        project_root = current_dir
        print(f"âœ… ÐÐ°Ð¹Ð´ÐµÐ½ Poetry Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð² Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¿Ð°Ð¿ÐºÐµ: {project_root}")
    
    # Ð•ÑÐ»Ð¸ Ð½Ðµ Ð½Ð°ÑˆÐ»Ð¸, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÑƒÑŽ
    elif (current_dir.parent / "pyproject.toml").exists():
        project_root = current_dir.parent
        print(f"âš ï¸  Pyproject.toml Ð½Ð°Ð¹Ð´ÐµÐ½ Ð² Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¹ Ð¿Ð°Ð¿ÐºÐµ: {project_root}")
        print(f"   Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ð°Ð¿ÐºÐ°: {current_dir.name}")
        choice = input("   Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð· Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¹ Ð¿Ð°Ð¿ÐºÐ¸? (y/n): ")
        if choice.lower() != 'y':
            project_root = current_dir
    
    # Ð•ÑÐ»Ð¸ pyproject.toml Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
    if project_root is None:
        project_root = current_dir
        print(f"âš ï¸  Pyproject.toml Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÑŽ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð¿Ð°Ð¿ÐºÑƒ: {project_root}")
    
    # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¸Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð¼ÐµÑ‚ÐºÐ¾Ð¹
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    output_filename = f"PROJECT_EXPORT_{timestamp}.md"
    
    print(f"ðŸ“‚ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¸Ð·: {project_root}")
    print(f"ðŸ“„ Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð°Ð¹Ð»: {output_filename}")
    print("â³ Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚...")
    
    try:
        export_project(project_root, output_filename)
        print(f"âœ… Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½!")
        print(f"ðŸ“Š Ð¤Ð°Ð¹Ð» ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½ ÐºÐ°Ðº: {output_filename}")
        print("\nðŸ“‹ Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð´Ð°Ð»ÑŒÑˆÐµ:")
        print(f"   1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð² VS Code: code {output_filename}")
        print(f"   2. Ð˜Ð»Ð¸ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð² Ð»ÑŽÐ±Ð¾Ð¼ Markdown-Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ðµ")
        print(f"   3. Ð¤Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿Ð¾Ð»Ð½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¸ ÐºÐ¾Ð´ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°")
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ðµ: {e}")
        print("ðŸ”„ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸Ð· ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:")
        print(f"   cd {project_root}")
        print("   python export_project_v2.py")
```

### ðŸ“„ main.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 2341 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivymd.app import MDApp
from kivy.uix.screenmanager import ScreenManager
from kivy.core.window import Window 
from kivy.metrics import dp

from app.core.config import AppConfig
from app.core.database import DatabaseManager
from app.ui.screens.main_screen import MainScreen

class PlantProtectionApp(MDApp):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.config = AppConfig()
        self.db = DatabaseManager()
        self.screen_manager = None

    def build(self):
        Window.size = (dp(390), dp(640))
        self.theme_cls.primary_palette = "Green"
        self.theme_cls.theme_style = "Light"
        
        # Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²
        self._initialize_components()
        
        # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°
        return self._create_interface()

    def _initialize_components(self):
        """Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"""
        try:
            # Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
            self.db.initialize()
            print("âœ… Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°")
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸: {e}")

    def _create_interface(self):
        """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"""
        self.screen_manager = ScreenManager()
        
        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½
        main_screen = MainScreen(name='main')
        self.screen_manager.add_widget(main_screen)
        
        return self.screen_manager

    # ÐœÐµÑ‚Ð¾Ð´Ñ‹ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸
    def open_diagnosis(self):
        print("ðŸ“· ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÑƒ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹")
    
    def open_catalog(self):
        print("ðŸ“š ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²")
    
    def open_orders(self):
        print("ðŸ›’ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·Ñ‹ Ð¸ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñ‹")
    
    def open_settings(self):
        print("âš™ï¸ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸")
    
    def navigation_draw(self):
        print("ðŸ“‹ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŽ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸")

if __name__ == '__main__':
    PlantProtectionApp().run()
```

### ðŸ“„ main_db_test.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 6825 Ð±Ð°Ð¹Ñ‚  
```python
"""
Ð¢Ð•Ð¡Ð¢ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ - Ð ÐÐ‘ÐžÐ§ÐÐ¯ Ð’Ð•Ð Ð¡Ð˜Ð¯
Ð­Ñ‚Ñƒ Ð²ÐµÑ€ÑÐ¸ÑŽ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð‘Ð” Ð² Ð»ÑŽÐ±Ð¾Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚
"""

from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.button import Button
from pathlib import Path

from app.core.database_backup import DatabaseManagerBackup as DatabaseManager

class DatabaseTestApp(App):
    """
    Ð¢ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÐºÐ°Ðº Ñ€ÐµÐ·ÐµÑ€Ð²Ð½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
    """
    
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.db = DatabaseManager()  # Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ
        self.status_label = None
    
    def build(self):
        # Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ layout
        layout = BoxLayout(orientation='vertical', padding=20, spacing=20)
        
        # Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
        title = Label(
            text='Plant Protection App - Ð¢ÐµÑÑ‚ Ð‘Ð”',
            font_size='24sp',
            size_hint_y=None,
            height=50
        )
        layout.add_widget(title)
        
        # Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
        self.status_label = Label(
            text='ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð‘Ð”',
            font_size='16sp',
            size_hint_y=None,
            height=100,
            text_size=(400, None)
        )
        layout.add_widget(self.status_label)
        
        # ÐšÐ½Ð¾Ð¿ÐºÐ¸
        btn_init = Button(
            text='1. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð‘Ð”',
            size_hint_y=None,
            height=50,
            on_press=self.initialize_database
        )
        layout.add_widget(btn_init)
        
        btn_check = Button(
            text='2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð‘Ð”',
            size_hint_y=None,
            height=50,
            on_press=self.check_database_file
        )
        layout.add_widget(btn_check)
        
        btn_show = Button(
            text='3. ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹',
            size_hint_y=None,
            height=50,
            on_press=self.show_disease_classes
        )
        layout.add_widget(btn_show)
        
        btn_search = Button(
            text='4. Ð¢ÐµÑÑ‚ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²',
            size_hint_y=None,
            height=50,
            on_press=self.test_search
        )
        layout.add_widget(btn_search)
        
        btn_tables = Button(
            text='5. ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹',
            size_hint_y=None,
            height=50,
            on_press=self.show_tables_info
        )
        layout.add_widget(btn_tables)
        
        return layout
    
    def show_message(self, message):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² ÑÑ‚Ð°Ñ‚ÑƒÑÐµ"""
        if self.status_label:
            self.status_label.text = message
        print("ðŸ’¬", message)
    
    def check_database_file(self, instance=None):
        """ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð‘Ð”"""
        try:
            db_path = Path(__file__).parent / "app" / "assets" / "database" / "plant_protection.db"
            exists = db_path.exists()
            size = db_path.stat().st_size if exists else 0
            
            if exists:
                self.show_message(f"âœ… Ð¤Ð°Ð¹Ð» Ð‘Ð” ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚\nÐ Ð°Ð·Ð¼ÐµÑ€: {size} Ð±Ð°Ð¹Ñ‚\nÐŸÑƒÑ‚ÑŒ: {db_path}")
            else:
                self.show_message("âŒ Ð¤Ð°Ð¹Ð» Ð‘Ð” Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½")
        except Exception as e:
            self.show_message(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸: {e}")
    
    def initialize_database(self, instance=None):
        """Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        try:
            success = self.db.initialize()
            if success:
                self.show_message("âœ… Ð‘Ð” ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°!")
                self.check_database_file()
            else:
                self.show_message("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð‘Ð”")
        except Exception as e:
            error_msg = f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: {str(e)}"
            self.show_message(error_msg)
    
    def show_disease_classes(self, instance=None):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹"""
        try:
            classes = self.db.get_all_disease_classes()
            if classes:
                class_names = "\n".join([f"{cls[1]}: {cls[2]}" for cls in classes])
                self.show_message(f"ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹:\n{class_names}")
            else:
                self.show_message("ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹")
        except Exception as e:
            self.show_message(f"ÐžÑˆÐ¸Ð±ÐºÐ°: {e}")
    
    def test_search(self, instance=None):
        """Ð¢ÐµÑÑ‚ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²"""
        try:
            results = self.db.search_pesticides("ÐÐ³Ñ€Ð¾Ñ‚Ð¸Ð½")
            if results:
                pesticide_names = "\n".join([f"{pest[1]} - {pest[5]} Ñ€ÑƒÐ±." for pest in results])
                self.show_message(f"ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ñ‹:\n{pesticide_names}")
            else:
                self.show_message("ÐŸÑ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹")
        except Exception as e:
            self.show_message(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð¸ÑÐºÐ°: {e}")
    
    def show_tables_info(self, instance=None):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð²ÑÐµÑ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ñ…"""
        try:
            cursor = self.db.connection.cursor()
            
            # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐ¿Ð¸ÑÐ¾Ðº Ð²ÑÐµÑ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†
            cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
            tables = cursor.fetchall()
            
            table_info = []
            for table in tables:
                table_name = table[0]
                cursor.execute(f"SELECT COUNT(*) FROM {table_name}")
                count = cursor.fetchone()[0]
                table_info.append(f"{table_name}: {count} Ð·Ð°Ð¿Ð¸ÑÐµÐ¹")
            
            self.show_message("Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð² Ð‘Ð”:\n" + "\n".join(table_info))
            
        except Exception as e:
            self.show_message(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†: {e}")

if __name__ == '__main__':
    print("ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…...")
    print("ðŸ’¾ Ð­Ñ‚Ð° Ð²ÐµÑ€ÑÐ¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð° ÐºÐ°Ðº Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ")
    DatabaseTestApp().run()
```

### ðŸ“„ pyproject.toml
**Ð Ð°Ð·Ð¼ÐµÑ€:** 731 Ð±Ð°Ð¹Ñ‚  
```toml
[tool.poetry]
name = "plant-protection-app"
version = "0.1.0"
description = "My test version of mobile_plant_app"
authors = ["nell.fdorova.00@mail.ru"]
readme = ""  # Ð£Ð‘Ð ÐÐ¢Ð¬ README.md
packages = [{include = "app"}]

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÑ‚Ñƒ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ package mode:
package-mode = false

[tool.poetry.dependencies]
python = "^3.11"
kivy = "^2.3.0"
kivymd = "^1.1.1"
pillow = "^10.0.0"
opencv-python = "^4.8.0"
numpy = ">=1.24,<2"
pandas = "^2.0.0"
openpyxl = "^3.1.0"
sqlalchemy = "^2.0.0"

[tool.poetry.group.dev.dependencies]
pytest = "^7.0.0"
black = "^23.0.0"
flake8 = "^6.0.0"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry-core.metadata"
```

### ðŸ“„ app\README.txt
**Ð Ð°Ð·Ð¼ÐµÑ€:** 1186 Ð±Ð°Ð¹Ñ‚  
```text
# Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ ÐºÐ¾Ð´Ð°

## ðŸ“ Ð¤Ð°Ð¹Ð»Ñ‹ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¿Ð¸Ð¹:

1. **`main_db_test.py`** - Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð‘Ð”
2. **`app/core/database_backup.py`** - Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ DatabaseManager

## ðŸš€ ÐšÐ°Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸:

### Ð”Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð‘Ð”:
```bash
python main_db_test.py

## Ð”Ð»Ñ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ¹ Ð‘Ð”:
### Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð´ Ð¸Ð· database_backup.py Ð² database.py
### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ main_db_test.py ÐºÐ°Ðº Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

#ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐÐ¡
### ÐºÐ»Ð°ÑÑÑ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ ÐÐ¡ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð² \app\assets\disease_classes.txt
disease_classes.txt:
0 Ð—Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ðµ_Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ
1 ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ_Ñ€Ð¾ÑÐ°  
2 ÐŸÐ°Ñ€ÑˆÐ°
3 Ð Ð¶Ð°Ð²Ñ‡Ð¸Ð½Ð°
....
Ð’ ÑÑ‚Ð¸ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ Ð² Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð‘Ð”.
Ð”Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð½ÑƒÐ¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ main.py
 Ð¸ Ð½Ð°Ð¶Ð°Ñ‚ÑŒ: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…. 
```

### ðŸ“„ app\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\assets\disease_classes.txt
**Ð Ð°Ð·Ð¼ÐµÑ€:** 321 Ð±Ð°Ð¹Ñ‚  
```text
0 Ð—Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ðµ_Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ
1 ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ_Ñ€Ð¾ÑÐ°  
2 ÐŸÐ°Ñ€ÑˆÐ°
3 Ð Ð¶Ð°Ð²Ñ‡Ð¸Ð½Ð°
4 Ð¤Ð¸Ñ‚Ð¾Ñ„Ñ‚Ð¾Ñ€Ð¾Ð·
5 ÐÐ½Ñ‚Ñ€Ð°ÐºÐ½Ð¾Ð·
6 Ð‘Ð°ÐºÑ‚ÐµÑ€Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ_Ð¿ÑÑ‚Ð½Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ
7 Ð’Ð¸Ñ€ÑƒÑ_Ð¼Ð¾Ð·Ð°Ð¸ÐºÐ¸
8 Ð¡ÐµÑ€Ð°Ñ_Ð³Ð½Ð¸Ð»ÑŒ
9 Ð§ÐµÑ€Ð½Ð°Ñ_Ð¿ÑÑ‚Ð½Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ
10 Ð’ÐµÑ€Ñ‚Ð¸Ñ†Ð¸Ð»Ð»ÐµÐ·
```

### ðŸ“„ app\assets\models\plant_disease_model.tflite
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```

```

### ðŸ“„ app\core\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\core\config.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 1118 Ð±Ð°Ð¹Ñ‚  
```python
import os
from pathlib import Path

class AppConfig:
    """ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"""
    
    def __init__(self):
        self.app_name = "Plant Protection"
        self.version = "1.0.0"
        
        # ÐŸÑƒÑ‚Ð¸ Ðº Ñ€ÐµÑÑƒÑ€ÑÐ°Ð¼
        self.base_dir = Path(__file__).parent.parent.parent
        self.assets_dir = self.base_dir / "app" / "assets"
        self.models_dir = self.assets_dir / "models"
        self.database_dir = self.assets_dir / "database"
        
        # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
        self.database_path = self.database_dir / "plant_protection.db"
        
        # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚
        self._create_directories()
    
    def _create_directories(self):
        """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹"""
        directories = [
            self.assets_dir,
            self.models_dir,
            self.database_dir
        ]
        
        for directory in directories:
            directory.mkdir(parents=True, exist_ok=True)
```

### ðŸ“„ app\core\database.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 14522 Ð±Ð°Ð¹Ñ‚  
```python
import sqlite3
from pathlib import Path
from app.core.config import AppConfig

class DatabaseManager:
    """ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… SQLite"""
    
    def __init__(self):
        # ÐŸÑ€ÑÐ¼Ð¾Ð¹ Ð¿ÑƒÑ‚ÑŒ Ðº Ð‘Ð” Ð±ÐµÐ· Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Config
        base_dir = Path(__file__).parent.parent.parent
        self.database_path = base_dir / "app" / "assets" / "database" / "plant_protection.db"
        self.connection = None
        
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚
        self.database_path.parent.mkdir(parents=True, exist_ok=True)
    
    def initialize(self):
        """Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        try:
            self.connection = sqlite3.connect(self.database_path)
            self.connection.row_factory = sqlite3.Row
            self._create_tables()
            self._insert_sample_data()
            print("âœ… Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾")
            print(f"ðŸ“ ÐŸÑƒÑ‚ÑŒ Ðº Ð‘Ð”: {self.database_path}")
            return True
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð‘Ð”: {e}")
            return False
    
    def _create_tables(self):
        """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ† Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÑÑ…ÐµÐ¼Ðµ"""
        cursor = self.connection.cursor()
        
        # 1. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ñ‚Ð¸Ð¿Ð¾Ð² Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_types (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                type_name TEXT NOT NULL UNIQUE
            )
        ''')
        
        # 2. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS cultures (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                culture_name TEXT NOT NULL UNIQUE
            )
        ''')
        
        # 3. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ð²ÐµÑ‰ÐµÑÑ‚Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS active_substances (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                substance_name TEXT NOT NULL UNIQUE
            )
        ''')
        

        # 4. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸ (ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ)
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS disease_classes (
                class_index INTEGER PRIMARY KEY,  -- Ð˜Ð½Ð´ÐµÐºÑ Ð¸Ð· Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸ ÐºÐ°Ðº PRIMARY KEY
                class_name TEXT NOT NULL UNIQUE   -- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ
            )
        ''')

        # 5. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð±Ð¾Ð»ÐµÐ·Ð½ÐµÐ¹ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ð¹
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS diseases (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                disease_name TEXT NOT NULL UNIQUE,
                symptoms TEXT,
                prevention_methods TEXT,
                culture_id INTEGER REFERENCES cultures(id),
                disease_class_index INTEGER REFERENCES disease_classes(class_index)  -- ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ° Ðº class_index
            )
        ''')
        
        # 6. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticides (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                description TEXT,
                application_rate TEXT,
                packaging TEXT,
                price DECIMAL(10, 2),
                manufacturer TEXT,
                unit_of_measure TEXT,
                # image_url TEXT,
                pesticide_type_id INTEGER REFERENCES pesticide_types(id)
            )
        ''')
        
        # 7. Ð¡Ð²ÑÐ·ÑƒÑŽÑ‰Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_active_substances (
                pesticide_id INTEGER REFERENCES pesticides(id),
                substance_id INTEGER REFERENCES active_substances(id),
                concentration TEXT,
                PRIMARY KEY (pesticide_id, substance_id)
            )
        ''')
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_cultures (
                pesticide_id INTEGER REFERENCES pesticides(id),
                culture_id INTEGER REFERENCES cultures(id),
                PRIMARY KEY (pesticide_id, culture_id)
            )
        ''')
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_diseases (
                pesticide_id INTEGER REFERENCES pesticides(id),
                disease_id INTEGER REFERENCES diseases(id),
                PRIMARY KEY (pesticide_id, disease_id)
            )
        ''')
        
        # 8. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS clients (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                client_name TEXT NOT NULL,
                contact_person TEXT,
                phone TEXT,
                email TEXT,
                total_orchard_area DECIMAL(10, 2),
                address TEXT,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # 9. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS client_cultures (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                client_id INTEGER REFERENCES clients(id),
                culture_id INTEGER REFERENCES cultures(id),
                area DECIMAL(10, 2),
                UNIQUE(client_id, culture_id)
            )
        ''')
        
        # 10. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS orders (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                order_number TEXT UNIQUE,
                client_id INTEGER REFERENCES clients(id),
                order_date DATE NOT NULL,
                shipment_date DATE,
                payment_date DATE,
                total_amount DECIMAL(12, 2),
                status TEXT DEFAULT 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº',
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # 11. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð·Ð°ÐºÐ°Ð·Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS order_items (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                order_id INTEGER REFERENCES orders(id),
                pesticide_id INTEGER REFERENCES pesticides(id),
                culture_id INTEGER REFERENCES cultures(id),
                quantity DECIMAL(10, 3),
                packaging TEXT,
                unit_price DECIMAL(10, 2),
                discount DECIMAL(5, 2) DEFAULT 0,
                discounted_price DECIMAL(10, 2),
                item_total DECIMAL(12, 2),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        self.connection.commit()
        print("âœ… Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹")
        # Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°
        self._load_disease_classes_from_file()
    
    def _insert_sample_data(self):
     """Ð’ÑÑ‚Ð°Ð²ÐºÐ° Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… - ÐžÐ¡ÐÐžÐ’ÐÐÐ¯ Ð’Ð•Ð Ð¡Ð˜Ð¯ (Ð¿ÑƒÑÑ‚Ð°Ñ)"""
    # Ð’ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð½Ðµ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
    # Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð¼Ð¸Ð½ÐºÑƒ Ð¸Ð»Ð¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚
    pass

    # ÐœÐµÑ‚Ð¾Ð´Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
    
    def get_disease_class_by_index(self, class_index):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ° Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ Ð¿Ð¾ Ð¸Ð½Ð´ÐµÐºÑÑƒ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT * FROM disease_classes 
            WHERE class_index = ?
        ''', (class_index,))
        return cursor.fetchone()

    def get_all_disease_classes(self):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT * FROM disease_classes 
            ORDER BY class_index
        ''')
        return cursor.fetchall()

    def update_disease_classes_from_file(self):
        """ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°"""
        print("ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹...")
        self._load_disease_classes_from_file()
        return True
   
    
    def get_recommendations_for_disease_class(self, class_index):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¹ Ð´Ð»Ñ ÐºÐ»Ð°ÑÑÐ° Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT p.* FROM pesticides p
            JOIN pesticide_diseases pd ON p.id = pd.pesticide_id
            JOIN diseases d ON pd.disease_id = d.id
            WHERE d.disease_class_id = ?
            LIMIT 10
        ''', (class_index,))
        return cursor.fetchall()
    
def search_pesticides(self, query, filters=None):
    """ÐŸÐ¾Ð¸ÑÐº Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð² Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸"""
    cursor = self.connection.cursor()
    
    sql = '''
        SELECT DISTINCT p.*
        FROM pesticides p
        LEFT JOIN pesticide_active_substances pas ON p.id = pas.pesticide_id
        LEFT JOIN active_substances as ON pas.substance_id = as.id
        LEFT JOIN pesticide_diseases pd ON p.id = pd.pesticide_id
        LEFT JOIN diseases d ON pd.disease_id = d.id
        WHERE (p.name LIKE ? OR as.substance_name LIKE ? OR d.disease_name LIKE ?)
    '''
    params = [f'%{query}%', f'%{query}%', f'%{query}%']
    
    cursor.execute(sql, params)
    return cursor.fetchall()
    
    def close(self):
        """Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ñ Ð‘Ð”"""
        if self.connection:
            self.connection.close()
def _load_disease_classes_from_file(self):
    """Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· TXT Ñ„Ð°Ð¹Ð»Ð°"""
    try:
        # ÐŸÑƒÑ‚ÑŒ Ðº Ñ„Ð°Ð¹Ð»Ñƒ Ñ ÐºÐ»Ð°ÑÑÐ°Ð¼Ð¸
        classes_file = self.database_path.parent / "disease_classes.txt"
        
        if not classes_file.exists():
            print("âš ï¸ Ð¤Ð°Ð¹Ð» disease_classes.txt Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ ÐºÐ»Ð°ÑÑÑ‹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ")
            self._create_default_disease_classes()
            return
        
        cursor = self.connection.cursor()
        
        # ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹ Ð½Ð¾Ð²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
        cursor.execute('DELETE FROM disease_classes')
        
        # Ð§Ð¸Ñ‚Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»
        with open(classes_file, 'r', encoding='utf-8') as f:
            for line in f:
                line = line.strip()
                if line and not line.startswith('#'):  # ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
                    parts = line.split(' ', 1)  # Ð Ð°Ð·Ð´ÐµÐ»ÑÐµÐ¼ Ð¿Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñƒ
                    if len(parts) == 2:
                        class_index = int(parts[0])
                        class_name = parts[1].replace('_', ' ')  # Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ð¾Ð´Ñ‡ÐµÑ€ÐºÐ¸Ð²Ð°Ð½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹
                        
                        cursor.execute('''
                            INSERT INTO disease_classes (class_index, class_name)
                            VALUES (?, ?)
                        ''', (class_index, class_name))
        
        self.connection.commit()
        print(f"âœ… ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°: {classes_file.name}")
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹: {e}")
        self._create_default_disease_classes()

def _create_default_disease_classes(self):
    """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ"""
    try:
        cursor = self.connection.cursor()
        
        default_classes = [
            (0, 'Ð—Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ'),
            (1, 'ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ Ñ€Ð¾ÑÐ°'),
            (2, 'ÐŸÐ°Ñ€ÑˆÐ°'),
            (3, 'Ð Ð¶Ð°Ð²Ñ‡Ð¸Ð½Ð°'),
            (4, 'Ð¤Ð¸Ñ‚Ð¾Ñ„Ñ‚Ð¾Ñ€Ð¾Ð·'),
            (5, 'ÐÐ½Ñ‚Ñ€Ð°ÐºÐ½Ð¾Ð·'),
            (6, 'Ð‘Ð°ÐºÑ‚ÐµÑ€Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿ÑÑ‚Ð½Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ'),
            (7, 'Ð’Ð¸Ñ€ÑƒÑ Ð¼Ð¾Ð·Ð°Ð¸ÐºÐ¸')
        ]
        
        cursor.executemany('''
            INSERT OR REPLACE INTO disease_classes (class_index, class_name)
            VALUES (?, ?)
        ''', default_classes)
        
        self.connection.commit()
        print("âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ")
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: {e}")


def export_disease_classes_to_file(self):
    """Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð² TXT Ñ„Ð°Ð¹Ð»"""
    try:
        classes_file = self.database_path.parent / "disease_classes_export.txt"
        
        cursor = self.connection.cursor()
        cursor.execute('SELECT class_index, class_name FROM disease_classes ORDER BY class_index')
        classes = cursor.fetchall()
        
        with open(classes_file, 'w', encoding='utf-8') as f:
            for class_item in classes:
                # Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹ Ð½Ð° Ð¿Ð¾Ð´Ñ‡ÐµÑ€ÐºÐ¸Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°
                class_name = class_item[1].replace(' ', '_')
                f.write(f"{class_item[0]} {class_name}\n")
        
        print(f"âœ… ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð²: {classes_file.name}")
        return str(classes_file)
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° ÐºÐ»Ð°ÑÑÐ¾Ð²: {e}")
        return None
```

### ðŸ“„ app\core\database_backup.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 18010 Ð±Ð°Ð¹Ñ‚  
```python
"""
Ð‘ÐÐ—Ð Ð”ÐÐÐÐ«Ð¥ - Ð¢Ð•Ð¡Ð¢ÐžÐ’ÐÐ¯ Ð’Ð•Ð Ð¡Ð˜Ð¯ Ð¡ Ð”ÐÐÐÐ«ÐœÐ˜
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ main_db_test.py
"""

import sqlite3
from pathlib import Path
from app.core.test_data import get_test_data

class DatabaseManagerBackup:
    """ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… SQLite - Ð¢Ð•Ð¡Ð¢ÐžÐ’ÐÐ¯ Ð’Ð•Ð Ð¡Ð˜Ð¯ Ð¡ Ð”ÐÐÐÐ«ÐœÐ˜"""
    
    def __init__(self):
        # ÐŸÑ€ÑÐ¼Ð¾Ð¹ Ð¿ÑƒÑ‚ÑŒ Ðº Ð‘Ð”
        base_dir = Path(__file__).parent.parent.parent
        self.database_path = base_dir / "app" / "assets" / "database" / "plant_protection.db"
        self.connection = None
        
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚
        self.database_path.parent.mkdir(parents=True, exist_ok=True)
    
    def initialize(self):
        """Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸"""
        try:
            self.connection = sqlite3.connect(self.database_path)
            self.connection.row_factory = sqlite3.Row
            self._create_tables()
            self._insert_test_data()  # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
            print("âœ… Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸")
            return True
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð‘Ð”: {e}")
            return False
    
    def _create_tables(self):
        """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ† Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        cursor = self.connection.cursor()
        
        # Ð’ÑÐµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ (ÐºÐ¾Ð¿Ð¸Ñ Ð¸Ð· database.py)
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_types (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                type_name TEXT NOT NULL UNIQUE
            )
        ''')
        
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS cultures (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                culture_name TEXT NOT NULL UNIQUE
            )
        ''')
        
        # 3. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ð²ÐµÑ‰ÐµÑÑ‚Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS active_substances (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                substance_name TEXT NOT NULL UNIQUE
            )
        ''')
        
 # 4. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸ (ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ)
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS disease_classes (
                class_index INTEGER PRIMARY KEY,
                class_name TEXT NOT NULL UNIQUE
        )
    ''')
    
    # 5. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð±Ð¾Ð»ÐµÐ·Ð½ÐµÐ¹ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ð¹
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS diseases (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            disease_name TEXT NOT NULL UNIQUE,
            symptoms TEXT,
            prevention_methods TEXT,
            culture_id INTEGER REFERENCES cultures(id),
            disease_class_index INTEGER REFERENCES disease_classes(class_index)
        )
    ''')
        
        # 6. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticides (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                description TEXT,
                application_rate TEXT,
                packaging TEXT,
                price DECIMAL(10, 2),
                manufacturer TEXT,
                unit_of_measure TEXT,
                image_url TEXT,
                pesticide_type_id INTEGER REFERENCES pesticide_types(id)
            )
        ''')
        
        # 7. Ð¡Ð²ÑÐ·ÑƒÑŽÑ‰Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_active_substances (
                pesticide_id INTEGER REFERENCES pesticides(id),
                substance_id INTEGER REFERENCES active_substances(id),
                concentration TEXT,
                PRIMARY KEY (pesticide_id, substance_id)
            )
        ''')
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_cultures (
                pesticide_id INTEGER REFERENCES pesticides(id),
                culture_id INTEGER REFERENCES cultures(id),
                PRIMARY KEY (pesticide_id, culture_id)
            )
        ''')
        
        # ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹ - Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS pesticide_diseases (
                pesticide_id INTEGER REFERENCES pesticides(id),
                disease_id INTEGER REFERENCES diseases(id),
                PRIMARY KEY (pesticide_id, disease_id)
            )
        ''')
        
        # 8. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS clients (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                client_name TEXT NOT NULL,
                contact_person TEXT,
                phone TEXT,
                email TEXT,
                total_orchard_area DECIMAL(10, 2),
                address TEXT,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # 9. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS client_cultures (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                client_id INTEGER REFERENCES clients(id),
                culture_id INTEGER REFERENCES cultures(id),
                area DECIMAL(10, 2),
                UNIQUE(client_id, culture_id)
            )
        ''')
        
        # 10. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS orders (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                order_number TEXT UNIQUE,
                client_id INTEGER REFERENCES clients(id),
                order_date DATE NOT NULL,
                shipment_date DATE,
                payment_date DATE,
                total_amount DECIMAL(12, 2),
                status TEXT DEFAULT 'Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº',
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # 11. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹ Ð·Ð°ÐºÐ°Ð·Ð°
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS order_items (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                order_id INTEGER REFERENCES orders(id),
                pesticide_id INTEGER REFERENCES pesticides(id),
                culture_id INTEGER REFERENCES cultures(id),
                quantity DECIMAL(10, 3),
                packaging TEXT,
                unit_price DECIMAL(10, 2),
                discount DECIMAL(5, 2) DEFAULT 0,
                discounted_price DECIMAL(10, 2),
                item_total DECIMAL(12, 2),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        self.connection.commit()
        print("âœ… Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹")
        # Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°
        self._load_disease_classes_from_file()
    
    def _insert_test_data(self):
        """Ð’ÑÑ‚Ð°Ð²ÐºÐ° Ð¢Ð•Ð¡Ð¢ÐžÐ’Ð«Ð¥ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· test_data.py"""
        cursor = self.connection.cursor()
        
        # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑƒÐ¶Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
        cursor.execute("SELECT COUNT(*) FROM pesticides")
        if cursor.fetchone()[0] == 0:
            print("ðŸ“ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¢Ð•Ð¡Ð¢ÐžÐ’Ð«Ð• Ð´Ð°Ð½Ð½Ñ‹Ðµ...")
            
            test_data = get_test_data()
            
            # 1. ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹
            cursor.executemany('''
                INSERT INTO disease_classes (class_index, class_name, description, is_active)
                VALUES (?, ?, ?, ?)
            ''', test_data['disease_classes'])
            
            # 2. ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹
            for culture in test_data['cultures']:
                cursor.execute('INSERT INTO cultures (culture_name) VALUES (?)', (culture,))
            
            # 3. Ð¢Ð¸Ð¿Ñ‹ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð²
            for p_type in test_data['pesticide_types']:
                cursor.execute('INSERT INTO pesticide_types (type_name) VALUES (?)', (p_type,))
            
            # 4. Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°
            for substance in test_data['substances']:
                cursor.execute('INSERT INTO active_substances (substance_name) VALUES (?)', (substance,))
            
            # 5. Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸
            cursor.executemany('''
                INSERT INTO diseases (disease_name, symptoms, culture_id, disease_class_id) 
                VALUES (?, ?, ?, ?)
            ''', test_data['diseases'])
            
            # 6. ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹
            cursor.executemany('''
                INSERT INTO pesticides (name, description, application_rate, packaging, price, manufacturer, unit_of_measure, pesticide_type_id)
                VALUES (?, ?, ?, ?, ?, ?, ?, ?)
            ''', test_data['pesticides'])
            
            # 7. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°Ð¼Ð¸
            cursor.executemany('''
                INSERT INTO pesticide_active_substances (pesticide_id, substance_id, concentration)
                VALUES (?, ?, ?)
            ''', test_data['pesticide_substances'])
            
            # 8. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð°Ð¼Ð¸
            cursor.executemany('''
                INSERT INTO pesticide_cultures (pesticide_id, culture_id)
                VALUES (?, ?)
            ''', test_data['pesticide_cultures'])
            
            # 9. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ Ð±Ð¾Ð»ÐµÐ·Ð½ÑÐ¼Ð¸
            cursor.executemany('''
                INSERT INTO pesticide_diseases (pesticide_id, disease_id)
                VALUES (?, ?)
            ''', test_data['pesticide_diseases'])
            
            # 10. ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹
            cursor.executemany('''
                INSERT INTO clients (client_name, contact_person, phone, email, total_orchard_area, address)
                VALUES (?, ?, ?, ?, ?, ?)
            ''', test_data['clients'])
            
            self.connection.commit()
            print("âœ… Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹")

    # ÐœÐµÑ‚Ð¾Ð´Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
    
    def get_disease_class_by_index(self, class_index):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ° Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ Ð¿Ð¾ Ð¸Ð½Ð´ÐµÐºÑÑƒ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT * FROM disease_classes 
            WHERE class_index = ?
        ''', (class_index,))
        return cursor.fetchone()

    def get_all_disease_classes(self):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT * FROM disease_classes 
            ORDER BY class_index
        ''')
        return cursor.fetchall()

    def update_disease_classes_from_file(self):
        """ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°"""
        print("ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹...")
        self._load_disease_classes_from_file()
        return True
    
    def get_recommendations_for_disease_class(self, class_index):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¹ Ð´Ð»Ñ ÐºÐ»Ð°ÑÑÐ° Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ"""
        cursor = self.connection.cursor()
        cursor.execute('''
            SELECT p.* FROM pesticides p
            JOIN pesticide_diseases pd ON p.id = pd.pesticide_id
            JOIN diseases d ON pd.disease_id = d.id
            WHERE d.disease_class_id = ?
            LIMIT 10
        ''', (class_index,))
        return cursor.fetchall()
    
    
    def search_pesticides(self, query, filters=None):
        """ÐŸÐ¾Ð¸ÑÐº Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð² - Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸"""
        try:
            cursor = self.connection.cursor()
            
            sql = '''
                SELECT p.*, pt.type_name 
                FROM pesticides p
                LEFT JOIN pesticide_types pt ON p.pesticide_type_id = pt.id
                WHERE p.name LIKE ? OR p.description LIKE ?
            '''
            params = [f'%{query}%', f'%{query}%']
            
            cursor.execute(sql, params)
            return cursor.fetchall()
            
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð¸ÑÐºÐ°: {e}")
            return []
    
    def get_all_pesticides(self):
        """ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ñ‹ - Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸"""
        try:
            cursor = self.connection.cursor()
            cursor.execute('''
                SELECT p.*, pt.type_name 
                FROM pesticides p
                LEFT JOIN pesticide_types pt ON p.pesticide_type_id = pt.id
                ORDER BY p.name
            ''')
            return cursor.fetchall()
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²: {e}")
            return []
    
    def close(self):
        """Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ñ Ð‘Ð”"""
        if self.connection:
            self.connection.close()


def export_disease_classes_to_file(self):
    """Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð² TXT Ñ„Ð°Ð¹Ð»"""
    try:
        classes_file = self.database_path.parent / "disease_classes_export.txt"
        
        cursor = self.connection.cursor()
        cursor.execute('SELECT class_index, class_name FROM disease_classes ORDER BY class_index')
        classes = cursor.fetchall()
        
        with open(classes_file, 'w', encoding='utf-8') as f:
            for class_item in classes:
                # Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹ Ð½Ð° Ð¿Ð¾Ð´Ñ‡ÐµÑ€ÐºÐ¸Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°
                class_name = class_item[1].replace(' ', '_')
                f.write(f"{class_item[0]} {class_name}\n")
        
        print(f"âœ… ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð²: {classes_file.name}")
        return str(classes_file)
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° ÐºÐ»Ð°ÑÑÐ¾Ð²: {e}")
        return None

def _load_disease_classes_from_file(self):
    """Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· TXT Ñ„Ð°Ð¹Ð»Ð°"""
    try:
        # ÐŸÑƒÑ‚ÑŒ Ðº Ñ„Ð°Ð¹Ð»Ñƒ Ñ ÐºÐ»Ð°ÑÑÐ°Ð¼Ð¸
        classes_file = self.database_path.parent / "disease_classes.txt"
        
        if not classes_file.exists():
            print("âš ï¸ Ð¤Ð°Ð¹Ð» disease_classes.txt Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ ÐºÐ»Ð°ÑÑÑ‹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ")
            self._create_default_disease_classes()
            return
        
        cursor = self.connection.cursor()
        
        # ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹ Ð½Ð¾Ð²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
        cursor.execute('DELETE FROM disease_classes')
        
        # Ð§Ð¸Ñ‚Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»
        with open(classes_file, 'r', encoding='utf-8') as f:
            for line in f:
                line = line.strip()
                if line and not line.startswith('#'):  # ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
                    parts = line.split(' ', 1)  # Ð Ð°Ð·Ð´ÐµÐ»ÑÐµÐ¼ Ð¿Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñƒ
                    if len(parts) == 2:
                        class_index = int(parts[0])
                        class_name = parts[1].replace('_', ' ')  # Ð—Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ð¾Ð´Ñ‡ÐµÑ€ÐºÐ¸Ð²Ð°Ð½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹
                        
                        cursor.execute('''
                            INSERT INTO disease_classes (class_index, class_name)
                            VALUES (?, ?)
                        ''', (class_index, class_name))
        
        self.connection.commit()
        print(f"âœ… ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°: {classes_file.name}")
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹: {e}")
        self._create_default_disease_classes()

def _create_default_disease_classes(self):
    """Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ"""
    try:
        cursor = self.connection.cursor()
        
        default_classes = [
            (0, 'Ð—Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ'),
            (1, 'ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ Ñ€Ð¾ÑÐ°'),
            (2, 'ÐŸÐ°Ñ€ÑˆÐ°'),
            (3, 'Ð Ð¶Ð°Ð²Ñ‡Ð¸Ð½Ð°'),
            (4, 'Ð¤Ð¸Ñ‚Ð¾Ñ„Ñ‚Ð¾Ñ€Ð¾Ð·'),
            (5, 'ÐÐ½Ñ‚Ñ€Ð°ÐºÐ½Ð¾Ð·'),
            (6, 'Ð‘Ð°ÐºÑ‚ÐµÑ€Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿ÑÑ‚Ð½Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ'),
            (7, 'Ð’Ð¸Ñ€ÑƒÑ Ð¼Ð¾Ð·Ð°Ð¸ÐºÐ¸')
        ]
        
        cursor.executemany('''
            INSERT OR REPLACE INTO disease_classes (class_index, class_name)
            VALUES (?, ?)
        ''', default_classes)
        
        self.connection.commit()
        print("âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ")
        
    except Exception as e:
        print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: {e}")
```

### ðŸ“„ app\core\test_data.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 3919 Ð±Ð°Ð¹Ñ‚  
```python
"""
Ð¢Ð•Ð¡Ð¢ÐžÐ’Ð«Ð• Ð”ÐÐÐÐ«Ð• Ð”Ð›Ð¯ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ (main_db_test.py)
"""

def get_test_data():
    """Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð²ÑÐµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð‘Ð”"""
    
    return {
        # 1. ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸
        'disease_classes': [
            (0, 'Ð—Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ', 'Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð±ÐµÐ· Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹', 1),
            (1, 'ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ Ñ€Ð¾ÑÐ°', 'Ð“Ñ€Ð¸Ð±ÐºÐ¾Ð²Ð¾Ðµ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ðµ Ñ Ð±ÐµÐ»Ñ‹Ð¼ Ð½Ð°Ð»ÐµÑ‚Ð¾Ð¼', 1),
            (2, 'ÐŸÐ°Ñ€ÑˆÐ°', 'ÐŸÑÑ‚Ð½Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ Ð»Ð¸ÑÑ‚ÑŒÐµÐ² Ð¸ Ð¿Ð»Ð¾Ð´Ð¾Ð²', 1),
            (3, 'Ð Ð¶Ð°Ð²Ñ‡Ð¸Ð½Ð°', 'Ð Ð¶Ð°Ð²Ñ‹Ðµ Ð¿ÑÑ‚Ð½Ð° Ð½Ð° Ð»Ð¸ÑÑ‚ÑŒÑÑ…', 1)
        ],
        
        # 2. ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹
        'cultures': ['ÐŸÑˆÐµÐ½Ð¸Ñ†Ð°', 'Ð¯Ð±Ð»Ð¾Ð½Ñ', 'ÐšÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»ÑŒ', 'Ð¢Ð¾Ð¼Ð°Ñ‚Ñ‹'],
        
        # 3. Ð¢Ð¸Ð¿Ñ‹ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð²
        'pesticide_types': ['Ð“ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´Ñ‹', 'Ð˜Ð½ÑÐµÐºÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹', 'Ð¤ÑƒÐ½Ð³Ð¸Ñ†Ð¸Ð´Ñ‹'],
        
        # 4. Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°
        'substances': ['ÐœÐµÑ‚ÑÑƒÐ»ÑŒÑ„ÑƒÑ€Ð¾Ð½-Ð¼ÐµÑ‚Ð¸Ð»', 'Ð˜Ð¼Ð¸Ð´Ð°ÐºÐ»Ð¾Ð¿Ñ€Ð¸Ð´', 'Ð”Ð¸Ñ„ÐµÐ½Ð¾ÐºÐ¾Ð½Ð°Ð·Ð¾Ð»'],
        
        # 5. Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸
        'diseases': [
            ('ÐœÑƒÑ‡Ð½Ð¸ÑÑ‚Ð°Ñ Ñ€Ð¾ÑÐ° ÑÐ±Ð»Ð¾Ð½Ð¸', 'Ð‘ÐµÐ»Ñ‹Ð¹ Ð¼ÑƒÑ‡Ð½Ð¸ÑÑ‚Ñ‹Ð¹ Ð½Ð°Ð»ÐµÑ‚ Ð½Ð° Ð»Ð¸ÑÑ‚ÑŒÑÑ…', 2, 1),
            ('ÐŸÐ°Ñ€ÑˆÐ° ÑÐ±Ð»Ð¾Ð½Ð¸', 'ÐžÐ»Ð¸Ð²ÐºÐ¾Ð²Ð¾-Ð±ÑƒÑ€Ñ‹Ðµ Ð¿ÑÑ‚Ð½Ð° Ð½Ð° Ð»Ð¸ÑÑ‚ÑŒÑÑ…', 2, 2),
            ('Ð¤Ð¸Ñ‚Ð¾Ñ„Ñ‚Ð¾Ñ€Ð¾Ð· ÐºÐ°Ñ€Ñ‚Ð¾Ñ„ÐµÐ»Ñ', 'Ð‘ÑƒÑ€Ñ‹Ðµ Ð¿ÑÑ‚Ð½Ð° Ð½Ð° Ð»Ð¸ÑÑ‚ÑŒÑÑ… Ð¸ ÐºÐ»ÑƒÐ±Ð½ÑÑ…', 3, 3)
        ],
        
        # 6. ÐŸÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ñ‹
        'pesticides': [
            ('Ð“ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´ 1', 'Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð³ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ð³Ð¾ ÑÐ¿ÐµÐºÑ‚Ñ€Ð°', '0,1-0,2 Ð»/Ð³Ð°', 'ÐšÐ°Ð½Ð¸ÑÑ‚Ñ€Ð° 5Ð»', 2500.00, 'ÐÐ³Ñ€Ð¾Ñ…Ð¸Ð¼', 'Ð»', 1),
            ('Ð¤ÑƒÐ½Ð³Ð¸Ñ†Ð¸Ð´ 1', 'Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ñ„ÑƒÐ½Ð³Ð¸Ñ†Ð¸Ð´ Ð¾Ñ‚ Ð¼ÑƒÑ‡Ð½Ð¸ÑÑ‚Ð¾Ð¹ Ñ€Ð¾ÑÑ‹', '0,5 ÐºÐ³/Ð³Ð°', 'ÐŸÐ°ÐºÐµÑ‚ 1ÐºÐ³', 1800.00, 'Ð‘Ð°Ð¹ÐµÑ€', 'ÐºÐ³', 3),
            ('Ð˜Ð½ÑÐµÐºÑ‚Ð¸Ñ†Ð¸Ð´ 1', 'ÐšÐ¸ÑˆÐµÑ‡Ð½Ð¾-ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð¸Ð½ÑÐµÐºÑ‚Ð¸Ñ†Ð¸Ð´', '0,2 Ð»/Ð³Ð°', 'Ð¤Ð»Ð°ÐºÐ¾Ð½ 1Ð»', 3200.00, 'Ð¡Ð¸Ð½Ð³ÐµÐ½Ñ‚Ð°', 'Ð»', 2),
            ('ÐÐ³Ñ€Ð¾Ñ‚Ð¸Ð½ Ð’Ð”Ð“', 'ÐœÐ¾Ñ‰Ð½Ñ‹Ð¹ Ð³ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´ Ð´Ð»Ñ Ð·Ð»Ð°ÐºÐ¾Ð²Ñ‹Ñ…', '0,07-0,1 ÐºÐ³/Ð³Ð°', 'ÐŸÐ°ÐºÐµÑ‚ 0,1ÐºÐ³', 1500.00, 'ÐÐ³Ñ€Ð¾Ñ…Ð¸Ð¼', 'ÐºÐ³', 1),
            ('Ð—Ð°Ñ‰Ð¸Ñ‚Ð° ÐŸÐ»ÑŽÑ', 'Ð¤ÑƒÐ½Ð³Ð¸Ñ†Ð¸Ð´ Ð´Ð»Ñ Ð¿Ð»Ð¾Ð´Ð¾Ð²Ñ‹Ñ… ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€', '0,8 Ð»/Ð³Ð°', 'ÐšÐ°Ð½Ð¸ÑÑ‚Ñ€Ð° 10Ð»', 4200.00, 'Ð‘Ð°Ð¹ÐµÑ€', 'Ð»', 3)
        ],
        
        # 7. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð°Ð¼Ð¸
        'pesticide_substances': [
            (1, 1, '500 Ð³/ÐºÐ³'),
            (2, 3, '250 Ð³/Ð»'),
            (3, 2, '200 Ð³/Ð»'),
            (4, 1, '600 Ð³/ÐºÐ³'),
            (5, 3, '300 Ð³/Ð»')
        ],
        
        # 8. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð°Ð¼Ð¸
        'pesticide_cultures': [
            (1, 1), (1, 2),
            (2, 2), (2, 4),
            (3, 2), (3, 3),
            (4, 1),
            (5, 2), (5, 4)
        ],
        
        # 9. Ð¡Ð²ÑÐ·Ð¸ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð¾Ð² Ñ Ð±Ð¾Ð»ÐµÐ·Ð½ÑÐ¼Ð¸
        'pesticide_diseases': [
            (2, 1),
            (2, 2),
            (5, 1),
            (5, 3)
        ],
        
        # 10. ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹
        'clients': [
            ('ÐžÐžÐž "ÐÐ³Ñ€Ð¾Ñ„Ð¸Ñ€Ð¼Ð° Ð’ÐµÑÐ½Ð°"', 'Ð˜Ð²Ð°Ð½Ð¾Ð² Ð˜Ð²Ð°Ð½', '+79991234567', 'agro@mail.ru', 150.5, 'ÐœÐ¾ÑÐºÐ¾Ð²ÑÐºÐ°Ñ Ð¾Ð±Ð»., Ð³. Ð”Ð¾Ð¼Ð¾Ð´ÐµÐ´Ð¾Ð²Ð¾'),
            ('ÐšÐ¤Ð¥ "ÐŸÐ¾Ð»ÐµÑÑŒÐµ"', 'ÐŸÐµÑ‚Ñ€Ð¾Ð² ÐŸÐµÑ‚Ñ€', '+79997654321', 'pole@mail.ru', 85.2, 'ÐšÐ°Ð»ÑƒÐ¶ÑÐºÐ°Ñ Ð¾Ð±Ð»., Ð´. ÐŸÐ¾Ð»ÐµÐ²Ð°Ñ')
        ]
    }
```

### ðŸ“„ app\ml\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\ml\image_processor.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 2091 Ð±Ð°Ð¹Ñ‚  
```python
import cv2
import numpy as np
from PIL import Image

class ImageProcessor:
    """ÐšÐ»Ð°ÑÑ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð¿ÐµÑ€ÐµÐ´ Ð¿Ð¾Ð´Ð°Ñ‡ÐµÐ¹ Ð² Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚ÑŒ"""
    
    @staticmethod
    def preprocess_image(image_path, target_size=(224, 224)):
        """ÐŸÑ€ÐµÐ´Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸"""
        try:
            # Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ
            image = Image.open(image_path)
            image = image.convert('RGB')
            
            # Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð°
            image = image.resize(target_size)
            
            # ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ Ð² numpy array Ð¸ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
            image_array = np.array(image) / 255.0
            
            # Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ batch dimension
            image_array = np.expand_dims(image_array, axis=0)
            
            return image_array
            
        except Exception as e:
            print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ: {e}")
            return None
    
    @staticmethod
    def load_and_preprocess_from_bytes(image_bytes, target_size=(224, 224)):
        """Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸ Ð¿Ñ€ÐµÐ´Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð· bytes"""
        try:
            # ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ bytes Ð² numpy array
            nparr = np.frombuffer(image_bytes, np.uint8)
            image = cv2.imdecode(nparr, cv2.IMREAD_COLOR)
            image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
            
            # Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð°
            image = cv2.resize(image, target_size)
            
            # ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
            image = image / 255.0
            
            # Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ batch dimension
            image = np.expand_dims(image, axis=0)
            
            return image
            
        except Exception as e:
            print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð· bytes: {e}")
            return None
```

### ðŸ“„ app\ml\model_loader.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 2537 Ð±Ð°Ð¹Ñ‚  
```python
import tensorflow as tf
import numpy as np

class ModelLoader:
    """ÐšÐ»Ð°ÑÑ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ TensorFlow Lite"""
    
    def __init__(self):
        self.model = None
        self.input_details = None
        self.output_details = None
    
    def load_model(self, model_path):
        """Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð¾Ð´ÐµÐ»Ð¸ TFLite"""
        try:
            # Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¼Ð¾Ð´ÐµÐ»Ð¸
            self.model = tf.lite.Interpreter(model_path=model_path)
            self.model.allocate_tensors()
            
            # ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ Ð²Ñ…Ð¾Ð´Ðµ Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´Ðµ
            self.input_details = self.model.get_input_details()
            self.output_details = self.model.get_output_details()
            
            print("âœ… ÐœÐ¾Ð´ÐµÐ»ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð°")
            return True
            
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¼Ð¾Ð´ÐµÐ»Ð¸: {e}")
            return False
    
    def predict(self, input_data):
        """Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ñ Ð½Ð° Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        try:
            if self.model is None:
                raise ValueError("ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð°")
            
            # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
            self.model.set_tensor(self.input_details[0]['index'], input_data.astype(np.float32))
            
            # Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„ÐµÑ€ÐµÐ½ÑÐ°
            self.model.invoke()
            
            # ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
            output_data = self.model.get_tensor(self.output_details[0]['index'])
            
            return output_data
            
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ñ: {e}")
            return None
    
    def get_top_predictions(self, predictions, top_k=3):
        """ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð¿-K Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ð¹"""
        try:
            # ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² Ñ‚Ð¾Ð¿-K Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ð¹
            top_indices = np.argsort(predictions[0])[-top_k:][::-1]
            top_probabilities = predictions[0][top_indices]
            
            return list(zip(top_indices, top_probabilities))
            
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ð¿ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ð¹: {e}")
            return []
```

### ðŸ“„ app\ui\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\ui\screens\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\ui\screens\camera_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\ui\screens\catalog_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 63471 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivy.uix.screenmanager import Screen
from kivymd.uix.bottomnavigation import MDBottomNavigationItem
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.button import MDRaisedButton, MDFlatButton, MDIconButton
from kivymd.uix.dialog import MDDialog
from kivymd.uix.label import MDLabel
from kivymd.uix.list import MDList
from kivymd.uix.scrollview import ScrollView
from kivymd.uix.textfield import MDTextField
from kivymd.uix.menu import MDDropdownMenu
from kivymd.uix.card import MDCard
from kivymd.uix.selectioncontrol import MDCheckbox
from kivy.properties import StringProperty, BooleanProperty, ListProperty
from kivymd.uix.snackbar import Snackbar
from kivy.metrics import dp
from kivy.uix.relativelayout import RelativeLayout


Builder.load_string('''
<CatalogTab>:
    name: 'catalog'
    text: 'ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³'
    icon: 'view-list'
    
    MDBoxLayout:
        orientation: 'vertical'
        
        # ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¸ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸
        MDBoxLayout:
            orientation: 'horizontal'
            adaptive_height: True
            padding: '10dp'
            spacing: '10dp'
            
            MDIconButton:
                icon: 'sort'
                theme_icon_color: "Custom"
                icon_color: "green"
                size_hint: None, None
                size: "40dp", "40dp"
                on_release: root.open_sort_menu()

            # Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð¿Ð¾Ð¸ÑÐºÐ° Ñ ÐºÑ€ÐµÑÑ‚Ð¸ÐºÐ¾Ð¼
            MDBoxLayout:
                orientation: 'horizontal'
                size_hint_x: 0.6
                spacing: '5dp'
                height: self.minimum_height
                
                MDTextField:
                    id: search_input
                    hint_text: "ÐŸÐ¾Ð¸ÑÐº ..."
                    mode: "rectangle"
                    size_hint_x: 0.85
                    on_text: root.search_pesticides(self.text)
                
                MDIconButton:
                    icon: 'close-circle'
                    theme_icon_color: "Custom"
                    icon_color: "gray" if root.ids.search_input.text else [0.5, 0.5, 0.5, 0.3]
                    size_hint: None, None
                    size: "40dp", "40dp"
                    on_release: 
                        root.ids.search_input.text = ""
                        root.search_pesticides("")
            
            MDIconButton:
                icon: 'close-circle'
                theme_icon_color: "Custom"
                icon_color: "gray"
                size_hint: None, None
                size: "40dp", "40dp"
                on_release: root.clear_search()
            
            MDIconButton:
                icon: 'filter'
                theme_icon_color: "Custom"
                icon_color: "green"
                size_hint: None, None
                size: "40dp", "40dp"
                on_release: root.open_filters_menu()        

        # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²
        ScrollView:
            MDList:
                id: pesticides_list
                padding: '10dp'
                spacing: '10dp'
    # Ð¤Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð²ÐµÑ€Ñ… ÑÐ¿Ð¸ÑÐºÐ°
    MDFloatingActionButton:
        icon: "plus"
        type: "standard"
        md_bg_color: "green"
        elevation_normal: 12
        pos_hint: {"center_x": 0.5, "y": 0.02}
        size_hint: (None, None)
        size: ("56dp", "56dp")
        on_release: root.create_new_pesticide()

<PesticideCard>:
    orientation: 'vertical'
    padding: '12dp'
    spacing: '6dp'
    size_hint_y: None
    height: '120dp'
    ripple_behavior: True
    
    MDBoxLayout:
        orientation: 'horizontal'
        spacing: '12dp'
        size_hint_y: 1
        
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.7
            spacing: '4dp'
            
            MDLabel:
                id: name_label
                text: root.pesticide_name
                font_style: 'H6'
                theme_text_color: 'Primary'
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'
                valign: 'top'
                shorten: True
                shorten_from: 'right'
                max_lines: 1
            
            MDLabel:
                id: substance_label
                text: f"Ð”Ð’: {root.pesticide_substance}"
                font_style: 'Body2'
                theme_text_color: 'Secondary'
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'
                valign: 'top'
                shorten: True
                shorten_from: 'right'
                max_lines: 1
            
            MDLabel:
                id: description_label
                text: root.pesticide_description
                font_style: 'Body2'
                theme_text_color: 'Secondary'
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'
                valign: 'top'
                shorten: True
                shorten_from: 'right'
                max_lines: 2
        
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.3
            spacing: '4dp'
            padding: '0dp', '4dp', '0dp', '0dp'
            
            MDLabel:
                id: price_label
                text: root.pesticide_price
                font_style: 'H6'
                theme_text_color: 'Primary'
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'right'
                valign: 'top'
            
            MDLabel:
                id: packaging_label
                text: f"{root.pesticide_packaging} | {root.pesticide_application_rate}"
                font_style: 'Caption'
                theme_text_color: 'Secondary'
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'right'
                valign: 'top'
                shorten: True
                shorten_from: 'right'
                max_lines: 2

<FilterDialog>:
    orientation: "vertical"
    spacing: "15dp"
    padding: "20dp"
    size_hint_y: None
    height: "500dp"
    
    ScrollView:
        MDBoxLayout:
            orientation: 'vertical'
            spacing: '10dp'
            size_hint_y: None
            height: '380dp'
            
            MDLabel:
                text: "Ð¢Ð¸Ð¿ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð°:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: type_filter
                hint_text: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿Ñ‹..."
                mode: "rectangle"
                on_focus: if self.focus: root.catalog_instance.open_type_menu()
            
            # ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹
            MDLabel:
                text: "ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: culture_filter
                hint_text: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹..."
                mode: "rectangle"
                on_focus: if self.focus: root.catalog_instance.open_culture_menu()
            
            # Ð—Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ
            MDLabel:
                text: "Ð—Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: disease_filter
                hint_text: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ñ..."
                mode: "rectangle"
                on_focus: if self.focus: root.catalog_instance.open_disease_menu()
            
            # Ð¦ÐµÐ½Ð°    
            MDLabel:
                text: "Ð¦ÐµÐ½Ð° Ð¾Ñ‚:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDBoxLayout:
                orientation: 'horizontal'
                spacing: '10dp'
                size_hint_y: None
                height: '48dp'
                
                MDTextField:
                    id: min_price
                    hint_text: "0"
                    mode: "rectangle"
                    input_filter: 'float'
                
                MDLabel:
                    text: "Ð´Ð¾"
                    size_hint_x: None
                    width: '30dp'
                
                MDTextField:
                    id: max_price
                    hint_text: "10000"
                    mode: "rectangle"
                    input_filter: 'float'
    
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "10dp"
        
        MDFlatButton:
            text: "Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
            on_release: root.reset_filters()
        
        MDRaisedButton:
            text: "ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"
            on_release: root.apply_filters()

<SortDialog>:
    orientation: "vertical"
    spacing: "15dp"
    padding: "20dp"
    size_hint_y: None
    height: "300dp"
    
    MDLabel:
        text: "Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾:"
        font_style: "H6"
        halign: "center"
        size_hint_y: None
        height: self.texture_size[1]
    
    MDBoxLayout:
        orientation: 'vertical'
        spacing: '10dp'
        
        MDLabel:
            text: "ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¹ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸:"
            theme_text_color: "Secondary"
            size_hint_y: None
            height: self.texture_size[1]
        
        MDBoxLayout:
            orientation: 'horizontal'
            spacing: '20dp'
            
            MDBoxLayout:
                orientation: 'vertical'
                spacing: '5dp'
                
                MDLabel:
                    text: "Ð¦ÐµÐ½Ð°"
                    size_hint_y: None
                    height: self.texture_size[1]
                
                MDCheckbox:
                    group: 'sort_criteria'
                    id: sort_price
                    on_active: root.set_sort_criteria('price')
            
            MDBoxLayout:
                orientation: 'vertical'
                spacing: '5dp'
                
                MDLabel:
                    text: "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"
                    size_hint_y: None
                    height: self.texture_size[1]
                
                MDCheckbox:
                    group: 'sort_criteria'
                    id: sort_name
                    on_active: root.set_sort_criteria('name')
        
        MDLabel:
            text: "ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸:"
            theme_text_color: "Secondary"
            size_hint_y: None
            height: self.texture_size[1]
        
        MDBoxLayout:
            orientation: 'horizontal'
            spacing: '20dp'
            
            MDBoxLayout:
                orientation: 'vertical'
                spacing: '5dp'
                
                MDLabel:
                    text: "ÐŸÐ¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ"
                    size_hint_y: None
                    height: self.texture_size[1]
                
                MDCheckbox:
                    group: 'sort_order'
                    id: sort_asc
                    on_active: root.set_sort_order('asc')
            
            MDBoxLayout:
                orientation: 'vertical'
                spacing: '5dp'
                
                MDLabel:
                    text: "ÐŸÐ¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ"
                    size_hint_y: None
                    height: self.texture_size[1]
                
                MDCheckbox:
                    group: 'sort_order'
                    id: sort_desc
                    on_active: root.set_sort_order('desc')
    
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "10dp"
        
        MDFlatButton:
            text: "ÐžÑ‚Ð¼ÐµÐ½Ð°"
            on_release: root.cancel_sort()
        
        MDRaisedButton:
            text: "ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"
            on_release: root.apply_sort()

<EditPesticideDialog>:
    orientation: "vertical"
    spacing: "15dp"
    padding: "20dp"
    size_hint_y: None
    height: "600dp"
    
    ScrollView:
        MDBoxLayout:
            orientation: 'vertical'
            spacing: '15dp'
            size_hint_y: None
            height: self.minimum_height
            padding: '10dp'
            
            # ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°
            MDLabel:
                text: "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_name
                # hint_text: "ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°"
                mode: "rectangle"
            
            # Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð¾
            MDLabel:
                text: "Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð¾:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_substance
                # hint_text: "Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐµ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ð¾"
                mode: "rectangle"
            
            # ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ
            MDLabel:
                text: "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_description
                # hint_text: "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°"
                mode: "rectangle"
                multiline: True
                height: dp(80)
            
            # ÐÐ¾Ñ€Ð¼Ð° Ñ€Ð°ÑÑ…Ð¾Ð´Ð°
            MDLabel:
                text: "ÐÐ¾Ñ€Ð¼Ð° Ñ€Ð°ÑÑ…Ð¾Ð´Ð°:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_application_rate
                # hint_text: "ÐÐ¾Ñ€Ð¼Ð° Ñ€Ð°ÑÑ…Ð¾Ð´Ð°"
                mode: "rectangle"
            
            # Ð¤Ð°ÑÐ¾Ð²ÐºÐ°
            MDLabel:
                text: "Ð¤Ð°ÑÐ¾Ð²ÐºÐ°:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_packaging
                # hint_text: "Ð¤Ð°ÑÐ¾Ð²ÐºÐ°"
                mode: "rectangle"
            
            # Ð¦ÐµÐ½Ð°
            MDLabel:
                text: "Ð¦ÐµÐ½Ð°:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_price
                # hint_text: "Ð¦ÐµÐ½Ð°"
                mode: "rectangle"
                input_filter: 'float'
            
            # ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ
            MDLabel:
                text: "ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_manufacturer
                # hint_text: "ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ"
                mode: "rectangle"
            
            # Ð•Ð´Ð¸Ð½Ð¸Ñ†Ð° Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ
            MDLabel:
                text: "Ð•Ð´Ð¸Ð½Ð¸Ñ†Ð° Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_unit
                hint_text: "ÑˆÑ‚/ÐºÐ³/Ð» Ð¸ Ñ‚.Ð´."
                mode: "rectangle"
            
            # Ð¢Ð¸Ð¿ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð° (Ð²Ñ‹Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº)
            MDLabel:
                text: "Ð¢Ð¸Ð¿ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð°:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_type
                hint_text: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿..."
                mode: "rectangle"
                on_focus: if self.focus: root.open_type_menu()
            
            # Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸ (Ð¼Ð½Ð¾Ð³Ð¾ÑÑ‚Ñ€Ð¾Ñ‡Ð½Ð¾Ðµ Ð¿Ð¾Ð»Ðµ)
            MDLabel:
                text: "Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_diseases
                hint_text: "Ð‘Ð¾Ð»ÐµÐ·Ð½Ð¸ (Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ)"
                mode: "rectangle"
                multiline: True
                height: dp(60)
            
            # ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹ (Ð¼Ð½Ð¾Ð³Ð¾ÑÑ‚Ñ€Ð¾Ñ‡Ð½Ð¾Ðµ Ð¿Ð¾Ð»Ðµ)
            MDLabel:
                text: "ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹:"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
            
            MDTextField:
                id: edit_cultures
                hint_text: "ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹ (Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ)"
                mode: "rectangle"
                multiline: True
                height: dp(60)
    
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "10dp"
        
        MDRaisedButton:
            text: "Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
            theme_text_color: "Custom"
            text_color: "white"
            md_bg_color: "red"
            on_release: root.delete_pesticide()
        
        MDFlatButton:
            text: "ÐžÑ‚Ð¼ÐµÐ½Ð°"
            on_release: root.cancel_edit()
        
        MDRaisedButton:
            text: "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"
            on_release: root.save_pesticide()
''')


class PesticideCard(MDCard):
    pesticide_name = StringProperty("")
    pesticide_substance = StringProperty("")
    pesticide_description = StringProperty("")
    pesticide_price = StringProperty("")
    pesticide_packaging = StringProperty("")
    pesticide_application_rate = StringProperty("")
    
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
    def on_pesticide_name(self, instance, value):
        # Ð•ÑÐ»Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿ÑƒÑÑ‚Ð¾Ðµ, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ "Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"
        if not value:
            self.ids.name_label.text = "Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"
        else:
            self.ids.name_label.text = value
    
    def on_pesticide_substance(self, instance, value):
        # Ð•ÑÐ»Ð¸ Ð”Ð’ Ð¿ÑƒÑÑ‚Ð¾Ðµ, Ð½Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ "Ð”Ð’:"
        if not value:
            self.ids.substance_label.text = ""
        else:
            self.ids.substance_label.text = f"Ð”Ð’: {value}"
    
    def on_pesticide_description(self, instance, value):
        # Ð•ÑÐ»Ð¸ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿ÑƒÑÑ‚Ð¾Ðµ, Ð½Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð½Ð¸Ñ‡ÐµÐ³Ð¾
        if not value:
            self.ids.description_label.text = ""
        else:
            self.ids.description_label.text = value
    
    def on_pesticide_price(self, instance, value):
        # Ð•ÑÐ»Ð¸ Ñ†ÐµÐ½Ð° Ð¿ÑƒÑÑ‚Ð°Ñ, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ "Ð¦ÐµÐ½Ð° Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½Ð°"
        if not value:
            self.ids.price_label.text = "Ð¦ÐµÐ½Ð° Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½Ð°"
            self.ids.price_label.font_style = 'Body2'
            self.ids.price_label.theme_text_color = 'Secondary'
        else:
            self.ids.price_label.text = value
            self.ids.price_label.font_style = 'H6'
            self.ids.price_label.theme_text_color = 'Primary'
    
    def on_pesticide_packaging(self, instance, value):
        self._update_packaging_text()
    
    def on_pesticide_application_rate(self, instance, value):
        self._update_packaging_text()
    
    def _update_packaging_text(self):
        """ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚ Ñ„Ð°ÑÐ¾Ð²ÐºÐ¸ Ð¸ Ð½Ð¾Ñ€Ð¼Ñ‹ Ñ€Ð°ÑÑ…Ð¾Ð´Ð°"""
        packaging = self.pesticide_packaging
        rate = self.pesticide_application_rate
        
        if packaging and rate:
            self.ids.packaging_label.text = f"{packaging} | {rate}"
        elif packaging:
            self.ids.packaging_label.text = packaging
        elif rate:
            self.ids.packaging_label.text = f"ÐÐ¾Ñ€Ð¼Ð°: {rate}"
        else:
            self.ids.packaging_label.text = ""

class FilterDialog(MDBoxLayout):
    def __init__(self, apply_callback, reset_callback, catalog_instance, current_filters, **kwargs):
        super().__init__(**kwargs)
        self.apply_callback = apply_callback
        self.reset_callback = reset_callback
        self.catalog_instance = catalog_instance
        self.current_filters = current_filters
        
        # Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²
        if current_filters:
            if 'type' in current_filters and current_filters['type']:
                self.ids.type_filter.text = ', '.join(current_filters['type'])
            if 'cultures' in current_filters and current_filters['cultures']:
                self.ids.culture_filter.text = ', '.join(current_filters['cultures'])
            if 'diseases' in current_filters and current_filters['diseases']:
                self.ids.disease_filter.text = ', '.join(current_filters['diseases'])
            if 'min_price' in current_filters:
                self.ids.min_price.text = current_filters['min_price']
            if 'max_price' in current_filters:
                self.ids.max_price.text = current_filters['max_price']
    
    def apply_filters(self):
        self.apply_callback()
    
    def reset_filters(self):
        self.reset_callback()


class SortDialog(MDBoxLayout):
    def __init__(self, apply_callback, cancel_callback, current_sort, **kwargs):
        super().__init__(**kwargs)
        self.apply_callback = apply_callback
        self.cancel_callback = cancel_callback
        self.sort_criteria = current_sort.get('criteria', 'name')
        self.sort_order = current_sort.get('order', 'asc')
        
        # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
        if self.sort_criteria == 'price':
            self.ids.sort_price.active = True
        else:
            self.ids.sort_name.active = True
            
        if self.sort_order == 'asc':
            self.ids.sort_asc.active = True
        else:
            self.ids.sort_desc.active = True
    
    def set_sort_criteria(self, criteria):
        self.sort_criteria = criteria
    
    def set_sort_order(self, order):
        self.sort_order = order
    
    def apply_sort(self):
        self.apply_callback(self.sort_criteria, self.sort_order)
    
    def cancel_sort(self):
        self.cancel_callback()

class EditPesticideDialog(MDBoxLayout):
    def __init__(self, pesticide_data, save_callback, delete_callback, cancel_callback, catalog_instance, **kwargs):
        super().__init__(**kwargs)
        self.pesticide_data = pesticide_data
        self.save_callback = save_callback
        self.delete_callback = delete_callback
        self.cancel_callback = cancel_callback
        self.catalog_instance = catalog_instance
        self.type_menu = None
        
        # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼, ÑÑ‚Ð¾ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚ Ð¸Ð»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
        self.is_new = not pesticide_data.get('name', '')  # Ð•ÑÐ»Ð¸ Ð¸Ð¼Ñ Ð¿ÑƒÑÑ‚Ð¾Ðµ - Ð½Ð¾Ð²Ñ‹Ð¹
        
        # Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð¿Ð¾Ð»Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°
        self.ids.edit_name.text = pesticide_data.get('name', '')
        self.ids.edit_substance.text = pesticide_data.get('substance', '')
        self.ids.edit_description.text = pesticide_data.get('description', '')
        self.ids.edit_application_rate.text = pesticide_data.get('application_rate', '')
        self.ids.edit_packaging.text = pesticide_data.get('packaging', '')
        
        # Ð”Ð»Ñ Ñ†ÐµÐ½Ñ‹ ÑƒÐ´Ð°Ð»ÑÐµÐ¼ "Ñ€ÑƒÐ±." ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ
        price_text = pesticide_data.get('price', '')
        if 'Ñ€ÑƒÐ±' in str(price_text):
            price_text = str(price_text).replace(' Ñ€ÑƒÐ±.', '').replace(' ', '')
        self.ids.edit_price.text = price_text
        
        self.ids.edit_manufacturer.text = pesticide_data.get('manufacturer', '')
        self.ids.edit_unit.text = pesticide_data.get('unit', 'ÑˆÑ‚')
        self.ids.edit_type.text = pesticide_data.get('type', 'Ð“ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´Ñ‹')
        self.ids.edit_diseases.text = pesticide_data.get('diseases', '')
        self.ids.edit_cultures.text = pesticide_data.get('cultures', '')
    
    def save_pesticide(self):
        updated_data = {
            'name': self.ids.edit_name.text,
            'substance': self.ids.edit_substance.text,
            'description': self.ids.edit_description.text,
            'application_rate': self.ids.edit_application_rate.text,
            'packaging': self.ids.edit_packaging.text,
            'price': self.ids.edit_price.text,
            'manufacturer': self.ids.edit_manufacturer.text,
            'unit': self.ids.edit_unit.text,
            'type': self.ids.edit_type.text,
            'diseases': self.ids.edit_diseases.text,
            'cultures': self.ids.edit_cultures.text,
        }
        
        # Ð”Ð»Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ID
        if not self.is_new and 'id' in self.pesticide_data:
            updated_data['id'] = self.pesticide_data['id']
        
        self.save_callback(updated_data)
    
    def open_type_menu(self):
        """ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŽ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ‚Ð¸Ð¿Ð° Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð° ÐŸÐžÐ” Ð¿Ð¾Ð»ÐµÐ¼"""
        if not self.filter_dialog:
            return
        
        # Ð•ÑÐ»Ð¸ Ð¼ÐµÐ½ÑŽ ÑƒÐ¶Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÐµÐ³Ð¾
        if hasattr(self, 'type_menu') and self.type_menu and self.type_menu.parent:
            self._update_type_menu_items()
            return
        
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¼ÐµÐ½ÑŽ ÐŸÐžÐ” Ð¿Ð¾Ð»ÐµÐ¼
        self.type_menu = MDDropdownMenu(
            caller=self.filter_dialog.content_cls.ids.type_filter,
            items=[],  # Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ð¼ Ð½Ð¸Ð¶Ðµ
            width_mult=4,
            max_height=dp(150),
            position="auto",
            ver_growth="down"
        )
        self._update_type_menu_items()
        self.type_menu.open()
    
    def select_pesticide_type(self, pesticide_type):
        """Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ‚Ð¸Ð¿ Ð¿ÐµÑÑ‚Ð¸Ñ†Ð¸Ð´Ð°"""
        self.ids.edit_type.text = pesticide_type
        if self.type_menu:
            self.type_menu.dismiss()
    
    def delete_pesticide(self):
        self.delete_callback(self.pesticide_data)
    
    def cancel_edit(self):
        self.cancel_callback()

class CatalogTab(MDBottomNavigationItem):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.filters = {}
        self.sort_settings = {'criteria': 'name', 'order': 'asc'}
        self.filter_dialog = None
        self.type_menu = None
        self.culture_menu = None
        self.disease_menu = None
        self.sort_dialog = None
        self.detail_dialog = None
        self.edit_dialog = None
        self.current_editing_pesticide = None
        self.selected_types = []
        self.selected_cultures = []
        self.selected_diseases = []
        self.test_pesticides = self._get_test_pesticides()
    
    def on_enter(self):
        """Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ðµ Ð½Ð° Ð²ÐºÐ»Ð°Ð´ÐºÑƒ"""
        self._setup_catalog()
    
    def _setup_catalog(self):
        """ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°"""
        self._load_pesticides()
    
    def clear_search(self):
        """ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð¸ÑÐº"""
        self.ids.search_input.text = ""
        self._load_pesticides()
        print("ðŸ”„ ÐŸÐ¾Ð¸ÑÐº Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½")

    def on_search_text_change(self, instance, value):
        """ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ†Ð²ÐµÑ‚ ÐºÑ€ÐµÑÑ‚Ð¸ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ñ‚ÐµÐºÑÑ‚Ð° Ð¿Ð¾Ð¸ÑÐºÐ°"""
        if hasattr(self, 'search_clear_button'):
            if value:
                self.search_clear_button.icon_color = "gray"
            else:
                self.search_clear_button.icon_color = [0.5, 0.5, 0.5, 0.3]
# ============= ÐÐ¾Ð²Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ ======
    def reset_filters_and_search(self):
        """Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸ Ð¿Ð¾Ð¸ÑÐº"""
        # Ð¡Ð±Ñ€Ð¾Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²
        self.filters = {}
        self.selected_types = []
        self.selected_cultures = []
        self.selected_diseases = []
        
        # Ð¡Ð±Ñ€Ð¾Ñ Ð¿Ð¾Ð¸ÑÐºÐ°
        self.ids.search_input.text = ""
        
        # ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð¾Ð¸ÑÐºÐ°
        self.ids.search_clear_button.icon_color = [0.5, 0.5, 0.5, 0.3]
        
        # Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ‚ÐµÐºÑÑ‚ Ð² Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾Ð¼ Ð´Ð¸Ð°Ð»Ð¾Ð³Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² (ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚)
        if self.filter_dialog:
            content = self.filter_dialog.content_cls
            content.ids.type_filter.text = ""
            content.ids.culture_filter.text = ""
            content.ids.disease_filter.text = ""
            content.ids.min_price.text = ""
            content.ids.max_price.text = ""
        
        print("ðŸ”„ Ð’ÑÐµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸ Ð¿Ð¾Ð¸ÑÐº ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ñ‹")
        self._load_pesticides()
# ============= ÐÐ¾Ð²Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ ======
    def create_new_pesticide(self):
        """Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚"""
        print("âž• Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°")
        
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°
        new_pesticide = {
            'id': len(self.test_pesticides) + 1,
            'name': '',
            'substance': '',
            'description': '',
            'application_rate': '',
            'packaging': '',
            'price': '',
            'manufacturer': '',
            'unit': 'ÑˆÑ‚',
            'type': 'Ð“ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´Ñ‹',
            'cultures': '',
            'diseases': ''
        }
        
        self.current_editing_pesticide = new_pesticide
        
        # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
        self.edit_dialog = MDDialog(
            title="Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°",
            type="custom",
            content_cls=EditPesticideDialog(
                pesticide_data=new_pesticide,
                save_callback=self.save_new_pesticide,
                delete_callback=None,
                cancel_callback=self.cancel_edit,
                catalog_instance=self,
                # is_new=True  # Ð£ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚
            ),
            size_hint=(0.9, 0.8),
            auto_dismiss=False
        )
        self.edit_dialog.open()
# ============= ÐÐ¾Ð²Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ ======
    def save_new_pesticide(self, new_data):
        """Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚"""
        print(f"ðŸ’¾ Ð¡Ð¾Ð·Ð´Ð°Ð½ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚: {new_data['name']}")
        
        try:
            # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ID Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ñ†ÐµÐ½Ñƒ
            new_data['id'] = len(self.test_pesticides) + 1
            
            # Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ Ð¿ÑƒÑÑ‚Ñ‹Ðµ
            if not new_data.get('name'):
                new_data['name'] = 'ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚'
            
            if new_data.get('price'):
                if 'Ñ€ÑƒÐ±' not in str(new_data['price']):
                    new_data['price'] = f"{new_data['price']} Ñ€ÑƒÐ±."
            else:
                new_data['price'] = 'Ð¦ÐµÐ½Ð° Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½Ð°'
            
            if not new_data.get('unit'):
                new_data['unit'] = 'ÑˆÑ‚'
            if not new_data.get('type'):
                new_data['type'] = 'Ð“ÐµÑ€Ð±Ð¸Ñ†Ð¸Ð´Ñ‹'
            
            # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚ Ð² ÑÐ¿Ð¸ÑÐ¾Ðº
            self.test_pesticides.append(new_data)
            
            # Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
            if self.edit_dialog:
                self.edit_dialog.dismiss()
            
            # ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²
            self._load_pesticides(
                search_query=self.ids.search_input.text,
                filters=self.filters
            )
            
            # ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± ÑƒÑÐ¿ÐµÑ…Ðµ
            self._show_success_message(f"ÐŸÑ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚ '{new_data['name']}' ÑÐ¾Ð·Ð´Ð°Ð½")
            
        except Exception as e:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ: {e}")
            self._show_error_message(f"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ: {e}")

    def _load_pesticides(self, search_query="", filters=None, sort_criteria=None, sort_order=None):
        """Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²"""
        pesticides_list = self.ids.pesticides_list
        pesticides_list.clear_widgets()
        
        # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ self.test_pesticides
        test_pesticides = self.test_pesticides
        
        # ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ð¾Ð¸ÑÐº Ð¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹
        filtered_pesticides = self._apply_filters(test_pesticides, search_query, filters)
        
        # ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÑƒ
        sorted_pesticides = self._apply_sorting(filtered_pesticides, sort_criteria, sort_order)
        
        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ñ‹ Ð² ÑÐ¿Ð¸ÑÐ¾Ðº
        for pesticide in sorted_pesticides:
            card = PesticideCard()
            
            # Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð½Ð° None
            card.pesticide_name = pesticide.get('name', '')
            card.pesticide_substance = pesticide.get('substance', '')
            card.pesticide_description = pesticide.get('description', '')
            card.pesticide_price = pesticide.get('price', '')
            card.pesticide_packaging = pesticide.get('packaging', '')
            card.pesticide_application_rate = pesticide.get('application_rate', '')
            
            card.on_release = lambda p=pesticide: self.show_pesticide_details(p)
            
            pesticides_list.add_widget(card)
    
    def _apply_filters(self, pesticides, search_query, filters):
        """ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² Ðº ÑÐ¿Ð¸ÑÐºÑƒ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð²"""
        filtered = pesticides
        
        # ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ, Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÑŽ Ð¸ Ð²ÐµÑ‰ÐµÑÑ‚Ð²Ñƒ
        if search_query:
            search_query = search_query.lower()
            filtered = [p for p in filtered
                    if search_query in p['name'].lower()
                    or search_query in p['description'].lower()
                    or search_query in p['substance'].lower()]
        
        # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ñƒ
        if filters and filters.get('type'):
            filtered = [p for p in filtered if p['type'] in filters['type']]
        
        # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð°Ð¼
        if filters and filters.get('cultures'):
            selected_cultures = filters['cultures']
            filtered = [p for p in filtered if any(
                culture in p.get('cultures', '') 
                for culture in selected_cultures
            )]
        
        # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸ÑÐ¼
        if filters and filters.get('diseases'):
            selected_diseases = filters['diseases']
            filtered = [p for p in filtered if any(
                disease in p.get('diseases', '') 
                for disease in selected_diseases
            )]
        
        # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ñ†ÐµÐ½Ðµ
        if filters:
            min_price = filters.get('min_price')
            max_price = filters.get('max_price')
            
            if min_price and min_price.strip():
                try:
                    min_val = float(min_price.replace(' ', ''))
                    filtered = [p for p in filtered if self._extract_price(p['price']) >= min_val]
                except ValueError:
                    pass
            
            if max_price and max_price.strip():
                try:
                    max_val = float(max_price.replace(' ', ''))
                    filtered = [p for p in filtered if self._extract_price(p['price']) <= max_val]
                except ValueError:

# ... Ñ„Ð°Ð¹Ð» Ð¾Ð±Ñ€ÐµÐ·Ð°Ð½, Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð¾ 1000 Ð¸Ð· 1592 ÑÑ‚Ñ€Ð¾Ðº ...
```

### ðŸ“„ app\ui\screens\disease_detection_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 499 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivymd.uix.bottomnavigation import MDBottomNavigationItem
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.label import MDLabel

Builder.load_string('''
<DiseaseDetectionScreen>:
    orientation: 'vertical'
    padding: '20dp'
    spacing: '20dp'
    
    MDLabel:
        text: 'Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ° Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹'
        halign: 'center'
        font_style: 'H4'
''')

class DiseaseDetectionScreen(MDBoxLayout):
    pass
```

### ðŸ“„ app\ui\screens\main_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 2183 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivy.uix.screenmanager import Screen
from kivymd.uix.bottomnavigation import MDBottomNavigation, MDBottomNavigationItem
from kivymd.uix.label import MDLabel
from kivymd.uix.boxlayout import MDBoxLayout

# Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÐ¸ Ð¸Ð· Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
from app.ui.screens.settings_screen import SettingsTab
from app.ui.screens.catalog_screen import CatalogTab

Builder.load_string('''
<MainScreen>:
    MDBottomNavigation:
        id: bottom_nav
        panel_color: "#f5f5f5"
        selected_color_background: "#e0f2f1"
        text_color_active: "green"

<DiagnosisTab>:
    name: 'diagnosis'
    text: 'Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ°'
    icon: 'camera'
    
    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        
        MDLabel:
            text: 'ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹'
            halign: 'center'
            font_style: 'H5'
        
<OrdersTab>:
    name: 'orders'
    text: 'Ð—Ð°ÐºÐ°Ð·Ñ‹'
    icon: 'cart'
    
    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        
        MDLabel:
            text: 'Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð°Ð¼Ð¸'
            halign: 'center'
            font_style: 'H5'
''')

# ÐšÐ»Ð°ÑÑÑ‹ Ð´Ð»Ñ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸
class DiagnosisTab(MDBottomNavigationItem):
    pass

class OrdersTab(MDBottomNavigationItem):
    pass

class MainScreen(Screen):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        
    def on_enter(self):
        """Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ðµ Ð½Ð° ÑÐºÑ€Ð°Ð½"""
        self._setup_navigation()
    
    def _setup_navigation(self):
        """ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð¸Ð¶Ð½ÐµÐ¹ Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸"""
        bottom_nav = self.ids.bottom_nav
        
        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð²ÐºÐ»Ð°Ð´ÐºÐ¸
        bottom_nav.add_widget(DiagnosisTab())
        bottom_nav.add_widget(CatalogTab())  # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ
        bottom_nav.add_widget(OrdersTab())
        bottom_nav.add_widget(SettingsTab())
```

### ðŸ“„ app\ui\screens\orders_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 632 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivymd.uix.bottomnavigation import MDBottomNavigationItem
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.label import MDLabel

Builder.load_string('''
<OrdersTab>:
    name: 'orders'
    text: 'Ð—Ð°ÐºÐ°Ð·Ñ‹'
    icon: 'cart'
    
    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        
        MDLabel:
            text: 'Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð°Ð¼Ð¸'
            halign: 'center'
            font_style: 'H5'
''')

class OrdersTab(MDBottomNavigationItem):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
```

### ðŸ“„ app\ui\screens\results_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 407 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.label import MDLabel

Builder.load_string('''
<ResultsScreen>:
    orientation: 'vertical'
    padding: '20dp'
    spacing: '20dp'
    
    MDLabel:
        text: 'Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°'
        halign: 'center'
        font_style: 'H4'
''')

class ResultsScreen(MDBoxLayout):
    pass
```

### ðŸ“„ app\ui\screens\settings_screen.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 8467 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.lang import Builder
from kivy.uix.screenmanager import Screen
from kivymd.uix.bottomnavigation import MDBottomNavigationItem
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.button import MDRaisedButton, MDFlatButton
from kivymd.uix.dialog import MDDialog
from kivymd.uix.label import MDLabel
from kivymd.uix.list import MDList, OneLineListItem
from kivymd.uix.scrollview import ScrollView

Builder.load_string('''
<SettingsTab>:
    name: 'settings'
    text: 'Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚/Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚'
    icon: 'database-export'
    
    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        spacing: '20dp'
        
        MDLabel:
            text: 'Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸'
            halign: 'center'
            font_style: 'H5'
            size_hint_y: None
            height: self.texture_size[1]
        
        ScrollView:
            MDList:
                id: settings_list
                
<ImportExportDialog>:
    orientation: "vertical"
    spacing: "10dp"
    padding: "20dp"
    size_hint_y: None
    height: "200dp"
    
    MDLabel:
        text: root.dialog_text
        halign: "center"
        theme_text_color: "Secondary"
        size_hint_y: None
        height: self.texture_size[1]
    
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "10dp"
        
        MDFlatButton:
            text: "ÐžÑ‚Ð¼ÐµÐ½Ð°"
            on_release: root.cancel_callback()
        
        MDRaisedButton:
            text: "ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ"
            on_release: root.confirm_callback()
''')

class ImportExportDialog(MDBoxLayout):
    """Ð”Ð¸Ð°Ð»Ð¾Ð³ Ð´Ð»Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°/ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð°"""
    
    def __init__(self, dialog_text, confirm_callback, cancel_callback, **kwargs):
        super().__init__(**kwargs)
        self.dialog_text = dialog_text
        self.confirm_callback = confirm_callback
        self.cancel_callback = cancel_callback

class SettingsTab(MDBottomNavigationItem):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.dialog = None
        
    def on_enter(self):
        """Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ðµ Ð½Ð° Ð²ÐºÐ»Ð°Ð´ÐºÑƒ"""
        self._setup_settings_list()
    
    def _setup_settings_list(self):
        """ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²"""
        settings_list = self.ids.settings_list
        settings_list.clear_widgets()
        
        # Ð¡ÐµÐºÑ†Ð¸Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…
        settings_list.add_widget(OneLineListItem(
            text="ðŸ“¥ Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¾Ð² Ð¸Ð· Excel",
            on_release=lambda x: self.show_import_dialog("Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ñ‹")
        ))
        
        settings_list.add_widget(OneLineListItem(
            text="ðŸ“¥ Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð¸Ð· Excel", 
            on_release=lambda x: self.show_import_dialog("ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñ‹")
        ))
        
        # Ð¡ÐµÐºÑ†Ð¸Ñ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…
        settings_list.add_widget(OneLineListItem(
            text="ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð° Ð² Excel",
            on_release=lambda x: self.show_export_dialog("ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³")
        ))
        
        settings_list.add_widget(OneLineListItem(
            text="ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð² Excel",
            on_release=lambda x: self.show_export_dialog("Ð·Ð°ÐºÐ°Ð·Ñ‹")
        ))
        
        settings_list.add_widget(OneLineListItem(
            text="ðŸ“„ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÐºÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ",
            on_release=lambda x: self.show_export_dialog("ÐšÐŸ")
        ))
        
        # Ð¡ÐµÐºÑ†Ð¸Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð‘Ð”
        settings_list.add_widget(OneLineListItem(
            text="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…",
            on_release=lambda x: self.update_database()
        ))
        
        settings_list.add_widget(OneLineListItem(
            text="ðŸ—‘ï¸ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ",
            on_release=lambda x: self.clear_database()
        ))
        settings_list.add_widget(OneLineListItem(
            text="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹",
            on_release=lambda x: self.update_disease_classes()
        ))
    
    def update_disease_classes(self):
        """ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°"""
        try:
            # Ð—Ð´ÐµÑÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð·Ð¾Ð² Ð¼ÐµÑ‚Ð¾Ð´Ð° Ð¸Ð· Ð‘Ð”
            print("ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°")
            self.show_message("ÐšÐ»Ð°ÑÑÑ‹ Ð·Ð°Ð±Ð¾Ð»ÐµÐ²Ð°Ð½Ð¸Ð¹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð° disease_classes.txt")
        except Exception as e:
            self.show_message(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ: {e}")

    def show_import_dialog(self, data_type):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°"""
        self.dialog = MDDialog(
            title=f"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ {data_type}",
            type="custom",
            content_cls=ImportExportDialog(
                dialog_text=f"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° {data_type} Ð¸Ð· Excel Ð±ÑƒÐ´ÐµÑ‚ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð²ÐµÑ€ÑÐ¸Ð¸.",
                confirm_callback=lambda: self.import_data(data_type),
                cancel_callback=self.close_dialog
            ),
            size_hint=(0.8, None),
            height="250dp"
        )
        self.dialog.open()
    
    def show_export_dialog(self, data_type):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð°"""
        self.dialog = MDDialog(
            title=f"Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ {data_type}",
            type="custom", 
            content_cls=ImportExportDialog(
                dialog_text=f"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° {data_type} Ð² Excel Ð±ÑƒÐ´ÐµÑ‚ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð²ÐµÑ€ÑÐ¸Ð¸.",
                confirm_callback=lambda: self.export_data(data_type),
                cancel_callback=self.close_dialog
            ),
            size_hint=(0.8, None),
            height="250dp"
        )
        self.dialog.open()
    
    def import_data(self, data_type):
        """Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð´Ð»Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        print(f"ðŸ“¥ Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ {data_type} Ð¸Ð· Excel")
        self.show_message(f"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ {data_type} Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!")
        self.close_dialog()
    
    def export_data(self, data_type):
        """Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð´Ð»Ñ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        print(f"ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ {data_type} Ð² Excel")
        self.show_message(f"Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ {data_type} Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!")
        self.close_dialog()
    
    def update_database(self):
        """Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð‘Ð”"""
        print("ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…")
        self.show_message("Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°!")
    
    def clear_database(self):
        """Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð´Ð»Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        self.dialog = MDDialog(
            title="ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…",
            text="Ð­Ñ‚Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ Ð²ÑÐµ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ. ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ?",
            buttons=[
                MDFlatButton(
                    text="ÐžÑ‚Ð¼ÐµÐ½Ð°",
                    on_release=lambda x: self.close_dialog()
                ),
                MDRaisedButton(
                    text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ",
                    on_release=lambda x: self.confirm_clear()
                )
            ]
        )
        self.dialog.open()
    
    def confirm_clear(self):
        """ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…"""
        print("ðŸ—‘ï¸ ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…")
        self.show_message("Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ñ‹!")
        self.close_dialog()
    
    def show_message(self, message):
        """ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ (Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð° Snackbar)"""
        print(f"ðŸ’¬ {message}")
    
    def close_dialog(self):
        """Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð¾Ð²Ð¾Ðµ Ð¾ÐºÐ½Ð¾"""
        if self.dialog:
            self.dialog.dismiss()
            self.dialog = None
    
```

### ðŸ“„ app\ui\widgets\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ app\ui\widgets\custom_buttons.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 955 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.uix.behaviors import ButtonBehavior
from kivymd.uix.boxlayout import MDBoxLayout
from kivymd.uix.label import MDLabel
from kivy.properties import StringProperty

class NavigationButton(ButtonBehavior, MDBoxLayout):
    """ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ Ñ Ð¸ÐºÐ¾Ð½ÐºÐ¾Ð¹ Ð¸ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼"""
    icon = StringProperty("")
    text = StringProperty("")
    
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.orientation = "vertical"
        self.size_hint = (None, None)
        self.size = ("80dp", "80dp")
        self.padding = "10dp"
        self.spacing = "5dp"

class PrimaryButton(ButtonBehavior, MDBoxLayout):
    """ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"""
    text = StringProperty("")
    
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.size_hint = (None, None)
        self.height = "48dp"
        self.padding = "20dp", "10dp"
```

### ðŸ“„ app\ui\widgets\image_widgets.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 364 Ð±Ð°Ð¹Ñ‚  
```python
from kivy.uix.image import Image
from kivy.uix.behaviors import ButtonBehavior
from kivymd.uix.boxlayout import MDBoxLayout

class ClickableImage(ButtonBehavior, Image):
    """Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ"""
    pass

class ImageWithCaption(MDBoxLayout):
    """Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒÑŽ"""
    pass
```

### ðŸ“„ tests\__init__.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

### ðŸ“„ tests\test_basic.py
**Ð Ð°Ð·Ð¼ÐµÑ€:** 0 Ð±Ð°Ð¹Ñ‚  
```python

```

## Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°

- **Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð²:** 31
- **Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð²:** 2
- **ÐžÐ±Ñ‰Ð¸Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€:** 141280 Ð±Ð°Ð¹Ñ‚ (137.97 KB)
- **Ð”Ð°Ñ‚Ð° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð°:** 2025-12-01 18:54:40
